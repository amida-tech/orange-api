<!DOCTYPE html><html><head><meta charset="utf-8"><title>API Documentation</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}body{color:black;background:white;font-family:'Roboto',Helvetica,sans-serif;font-size:14px;line-height:1.42}header{border-bottom:1px solid #ededed;margin-bottom:12px}h1,h2,h3,h4,h5{color:black;margin:12px 0}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:6px;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}h1{font-family:'Raleway',Helvetica,sans-serif;font-size:36px;font-weight:500}h2{font-family:'Raleway',Helvetica,sans-serif;font-size:30px;font-weight:500}h3{font-size:100%;text-transform:uppercase}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}a{color:#18bc9c;text-decoration:none}li p{margin:0}dl dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:180px}blockquote{color:rgba(0,0,0,0.5);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px;overflow:auto}pre code{background-color:transparent;padding:0;border:none}code{color:#444;background-color:#f5f5f5;font-family:'Inconsolata',monospace;padding:1px 4px;border:1px solid #cfcfcf;border-radius:3px}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0;margin-bottom:12px}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #ededed}.note,.warning{padding:.3em 1em;margin:1em 0;border-radius:2px;font-size:90%}.note h1,.warning h1,.note h2,.warning h2,.note h3,.warning h3,.note h4,.warning h4,.note h5,.warning h5,.note h6,.warning h6{font-family:'Raleway',Helvetica,sans-serif;font-size:135%;font-weight:500}.note p,.warning p{margin:.5em 0}.note{color:black;background-color:#eff7fc;border-left:4px solid #3498db}.note h1,.note h2,.note h3,.note h4,.note h5,.note h6{color:#3498db}.warning{color:black;background-color:#fcf0ef;border-left:4px solid #d62c1a}.warning h1,.warning h2,.warning h3,.warning h4,.warning h5,.warning h6{color:#d62c1a}nav{position:fixed;top:24px;bottom:0;overflow-y:auto}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:black;opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{border-left:2px solid black}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #ededed;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{border-left:2px solid black}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:14px;padding:3px 7px;font-size:12px;color:#000;background-color:#ededed;border-radius:10px;margin-top:-2px;margin-bottom:-2px}.badge.get{color:white;background-color:#3498db}.badge.head{color:white;background-color:#3498db}.badge.options{color:white;background-color:#3498db}.badge.put{color:white;background-color:#f39c12}.badge.patch{color:white;background-color:#f39c12}.badge.post{color:white;background-color:#18bc9c}.badge.delete{color:white;background-color:#e74c3c}.collapse-button{float:right}.collapse-button .close{display:none;color:#18bc9c;cursor:pointer}.collapse-button .open{color:#18bc9c;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:244px;width:696px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%;width:76%}@media (max-width:1200px){nav{width:200px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:170px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content{margin-left:auto;margin-right:auto;width:95%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.5);background-color:#ededed;text-decoration:none !important;border-top:1px solid #ededed;border-left:1px solid #ededed;border-right:1px solid #ededed;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #ededed;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#ededed;border-bottom:1px solid #ededed;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}nav .resource-group .heading a{margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4.action-heading{padding:12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.action h4.action-heading .name{float:right;font-weight:normal}.action h4.action-heading .method{padding:6px 12px;margin-right:12px;border-radius:3px}.action h4.action-heading .method.get{color:#000;background-color:white}.action h4.action-heading .method.head{color:#000;background-color:white}.action h4.action-heading .method.options{color:#000;background-color:white}.action h4.action-heading .method.put{color:#000;background-color:white}.action h4.action-heading .method.patch{color:#000;background-color:white}.action h4.action-heading .method.post{color:#000;background-color:white}.action h4.action-heading .method.delete{color:#000;background-color:white}.action h4.action-heading code{color:#444;background-color:rgba(255,255,255,0.7);border-color:transparent;font-weight:normal}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#3498db}.action.get h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.head{border-color:#3498db}.action.head h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.options{border-color:#3498db}.action.options h4.action-heading{color:white;background:#3498db;border-bottom-color:#3498db}.action.post{border-color:#18bc9c}.action.post h4.action-heading{color:white;background:#18bc9c;border-bottom-color:#18bc9c}.action.put{border-color:#f39c12}.action.put h4.action-heading{color:white;background:#f39c12;border-bottom-color:#f39c12}.action.patch{border-color:#f39c12}.action.patch h4.action-heading{color:white;background:#f39c12;border-bottom-color:#f39c12}.action.delete{border-color:#e74c3c}.action.delete h4.action-heading{color:white;background:#e74c3c;border-bottom-color:#e74c3c}</style></head><body class="preload"><a href="#top" class="text-muted back-to-top"><i class="fa fa-toggle-up"></i>&nbsp;Back to top</a><div class="container"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#top">Overview</a></div><div class="collapse-content"><ul><li><a href="#header-orange-api">Orange API</a></li><li><a href="#header-response-status-codes">Response Status Codes</a></li><li><a href="#header-success">Success</a></li><li><a href="#header-error">Error</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#authentication">Authentication</a></div><div class="collapse-content"><ul><li><a href="#authentication-access-tokens-post"><span class="badge post"><i class="fa fa-plus"></i></span>Retrieve an Access Token</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#users">Users</a></div><div class="collapse-content"><ul><li><a href="#users-user">User</a><ul><li><a href="#users-user-post"><span class="badge post"><i class="fa fa-plus"></i></span>Register a New User</a></li><li><a href="#users-user-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View User Info</a></li><li><a href="#users-user-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change User Info</a></li><li><a href="#users-user-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete User</a></li></ul></li><li><a href="#users-reset-password-post"><span class="badge post"><i class="fa fa-plus"></i></span>Reset a User's Password</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#requests">Requests</a></div><div class="collapse-content"><ul><li><a href="#requests-requests-from-user">Requests From User</a><ul><li><a href="#requests-requests-from-user-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create new Request</a></li><li><a href="#requests-requests-from-user-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>List Requests</a></li></ul></li><li><a href="#requests-request-from-user-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Cancel Request</a></li><li><a href="#requests-requests-to-user-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>List Requests</a></li><li><a href="#requests-request-to-user-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Close Request</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#patients">Patients</a></div><div class="collapse-content"><ul><li><a href="#patients-user-s-patients">User's Patients</a><ul><li><a href="#patients-user-s-patients-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create new Patient</a></li><li><a href="#patients-user-s-patients-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>List Patients</a></li></ul></li><li><a href="#patients-patient">Patient</a><ul><li><a href="#patients-patient-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View Patient Info</a></li><li><a href="#patients-patient-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update Patient Info</a></li><li><a href="#patients-patient-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete Patient</a></li></ul></li><li><a href="#patients-patient-report-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Generate Report</a></li><li><a href="#patients-patient-data-dump-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View JSON Data Dump</a></li><li><a href="#patients-patient-s-avatar">Patient's Avatar</a><ul><li><a href="#patients-patient-s-avatar-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View Patient Avatar</a></li><li><a href="#patients-patient-s-avatar-post"><span class="badge post"><i class="fa fa-plus"></i></span>Upload Patient Avatar</a></li></ul></li><li><a href="#patients-patient-s-shared-users">Patient's Shared Users</a><ul><li><a href="#patients-patient-s-shared-users-post"><span class="badge post"><i class="fa fa-plus"></i></span>Share with a User</a></li><li><a href="#patients-patient-s-shared-users-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>List all Shared Users</a></li></ul></li><li><a href="#patients-shared-user">Shared User</a><ul><li><a href="#patients-shared-user-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update Access Level</a></li><li><a href="#patients-shared-user-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Stop Sharing with User</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#habits">Habits</a></div><div class="collapse-content"><ul><li><a href="#habits-patient-habits">Patient Habits</a><ul><li><a href="#habits-patient-habits-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get Patient Habits</a></li><li><a href="#habits-patient-habits-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Set Patient Habits</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#journal-entries">Journal Entries</a></div><div class="collapse-content"><ul><li><a href="#journal-entries-journal-entries">Journal Entries</a><ul><li><a href="#journal-entries-journal-entries-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create an Entry</a></li><li><a href="#journal-entries-journal-entries-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve all Entries</a></li></ul></li><li><a href="#journal-entries-journal-entry">Journal Entry</a><ul><li><a href="#journal-entries-journal-entry-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve One Entry</a></li><li><a href="#journal-entries-journal-entry-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change an Entry</a></li><li><a href="#journal-entries-journal-entry-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete an Entry</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#doctors">Doctors</a></div><div class="collapse-content"><ul><li><a href="#doctors-doctors-collection">Doctors Collection</a><ul><li><a href="#doctors-doctors-collection-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a Doctor</a></li><li><a href="#doctors-doctors-collection-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve all Doctors</a></li></ul></li><li><a href="#doctors-doctor">Doctor</a><ul><li><a href="#doctors-doctor-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve a Doctor</a></li><li><a href="#doctors-doctor-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change a Doctor's Info</a></li><li><a href="#doctors-doctor-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a Doctor</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#pharmacies">Pharmacies</a></div><div class="collapse-content"><ul><li><a href="#pharmacies-pharmacies-collection">Pharmacies Collection</a><ul><li><a href="#pharmacies-pharmacies-collection-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a Pharmacy</a></li><li><a href="#pharmacies-pharmacies-collection-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve all Pharmacies</a></li></ul></li><li><a href="#pharmacies-pharmacy">Pharmacy</a><ul><li><a href="#pharmacies-pharmacy-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve a Pharmacy</a></li><li><a href="#pharmacies-pharmacy-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change a Pharmacy's Info</a></li><li><a href="#pharmacies-pharmacy-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a Pharmacy</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#medications">Medications</a></div><div class="collapse-content"><ul><li><a href="#header-permissions">Permissions</a></li><li><a href="#header-schedule">Schedule</a></li><li><a href="#medications-medications-collection">Medications Collection</a><ul><li><a href="#medications-medications-collection-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new Medication</a></li><li><a href="#medications-medications-collection-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve all Medications</a></li></ul></li><li><a href="#medications-medication">Medication</a><ul><li><a href="#medications-medication-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve a Medication</a></li><li><a href="#medications-medication-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change a Med's Info</a></li><li><a href="#medications-medication-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a Medication</a></li></ul></li><li><a href="#medications-medication-time">Medication Time</a><ul><li><a href="#medications-medication-time-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View Notification Settings</a></li><li><a href="#medications-medication-time-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Set Notification Settings</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#dose-events">Dose Events</a></div><div class="collapse-content"><ul><li><a href="#dose-events-dose-events-collection">Dose Events Collection</a><ul><li><a href="#dose-events-dose-events-collection-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create an Event</a></li><li><a href="#dose-events-dose-events-collection-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve all Doses</a></li></ul></li><li><a href="#dose-events-dose-event">Dose Event</a><ul><li><a href="#dose-events-dose-event-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Retrieve One Event</a></li><li><a href="#dose-events-dose-event-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Change an Event</a></li><li><a href="#dose-events-dose-event-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete an Event</a></li></ul></li><li><a href="#dose-events-first-dose-event">First Dose Event</a><ul></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#schedule-1">Schedule</a></div><div class="collapse-content"><ul><li><a href="#schedule-schedule-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>View Schedule</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#npi">NPI</a></div><div class="collapse-content"><ul><li><a href="#npi-provider-collection-post"><span class="badge post"><i class="fa fa-plus"></i></span>Query Providers</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#rxnorm">RXNorm</a></div><div class="collapse-content"><ul><li><a href="#rxnorm-medications-by-name-post"><span class="badge post"><i class="fa fa-plus"></i></span>Query</a></li><li><a href="#rxnorm-medications-by-spelling-post"><span class="badge post"><i class="fa fa-plus"></i></span>Query</a></li></ul></div></div></nav><div class="content"><header><h1 id="top">API Documentation</h1></header><style>
    /* wrap code in pre blocks courtesy https://longren.io/wrapping-text-inside-pre-tags/ */
    pre {
        white-space: pre-wrap;       /* CSS 3 */
        white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
        white-space: -pre-wrap;      /* Opera 4-6 */
        white-space: -o-pre-wrap;    /* Opera 7 */
        word-wrap: break-word;       /* Internet Explorer 5.5+ */
    }
</style>
<p>FORMAT: 1A
HOST: <a href="http://orange-api.amida-demo.com/api/">http://orange-api.amida-demo.com/api/</a></p>
<h1 id="header-orange-api">Orange API <a class="permalink" href="#header-orange-api" aria-hidden="true">¶</a></h1>
<p>Orange is a medication adherence app. This is a quasi-REST API for the Orange
backend, primarily allowing sharing between patients and caregivers.</p>
<p>All API endpoints must be prefixed with a version number: for example,
<code>/v1/auth/token</code> not just <code>/auth/token</code>. Currently <code>v1</code> is the only API version.</p>
<p>All data should be sent JSON-encoded, and all responses are returned in JSON.
Generally speaking, <code>null</code> should be sent to denote an optional field not being
present (so, for example, sending <code>null</code> to a <code>PUT</code> update request will remove the
field from the instance’s data, but just leaving out that field in the request
will leave the field as is in the data).</p>
<p>Throughout this document, we make the distinction between a user and a patient.
A user is an email/password pair, used to sign into the app, authenticate with the API,
and so on. A patient is someone we hold medication/adherence/etc data for. There is
a many-to-many association between users and patients: one user may own many patients
(for example, a mother collecting data both for herself and her son), and one patient
can be owned by many users (the concept of caregivers: the care of the son – the patient
– can be managed by both the mother and the father – the users).</p>
<p>This is a private API, and if you have permission to use it you’ll already have a <em>client
secret</em> in the form of a hexstring. This should be sent in the <code>X-Client-Secret</code> header,
for example</p>
<pre><code class="language-http"><span class="hljs-attribute">X-Client-Secret</span>: <span class="hljs-string">CLIENT_SECRET</span></code></pre>
<p>Not sending a client secret, or sending an invalid one, will result in a <code>401</code> HTTP error with
the body</p>
<pre><code class="language-javascript">{
    success: <span class="hljs-literal">false</span>,
    errors: [<span class="hljs-string">'invalid_client_secret'</span>]
}</code></pre>
<h3 id="header-response-status-codes">Response Status Codes <a class="permalink" href="#header-response-status-codes" aria-hidden="true">¶</a></h3>
<h4 id="header-success">Success <a class="permalink" href="#header-success" aria-hidden="true">¶</a></h4>
<p>All successful requests return responses with the following error codes:</p>
<ul>
<li>
<p><code>GET</code>, <code>PUT</code> and <code>DELETE</code> return <code>200</code> on success</p>
</li>
<li>
<p><code>POST</code> returns <code>201</code> on success</p>
</li>
</ul>
<h4 id="header-error">Error <a class="permalink" href="#header-error" aria-hidden="true">¶</a></h4>
<p>Error responses have <a href="http://www.restapitutorial.com/httpstatuscodes.html">standard HTTP error codes</a>,
along with an array of machine-readable error slugs in the <code>errors</code> key of the JSON response.</p>
<p>For example, when attempting to access user details without authentication</p>
<pre><code class="language-http"><span class="hljs-attribute">Status</span>: <span class="hljs-string">401 Access denied</span></code></pre>
<pre><code class="language-javascript">{
    success: <span class="hljs-literal">false</span>,
    errors: [<span class="hljs-string">'wrong_email_password'</span>]
}</code></pre>
<p>If an unknown error occurs, the response code will be <code>500</code> and <code>errors</code> will
contain the <code>unknown_error</code> key.</p>
<section id="authentication" class="resource-group"><h2 class="group-heading">Authentication<a href="#authentication" class="permalink">&para;</a></h2><p>Orange API uses access token authentication, like many REST services and similar
to (and in fact a semi-compatible subset of) OAuth2. First you use stored
user credentials (see <code>POST /auth/token</code> below) to generate an access token,
and then pass this access token into the <code>Authorization</code> header of all other
requests. All requests apart from user registration and token generation
need this authentication.</p>
<p>Precisely, the access token should be sent in the <code>Authorization</code> header in the
form</p>
<pre><code class="language-http"><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre>
<p>and should be sent in plaintext, <em>not</em> base64 encoded.</p>
<div id="authentication-access-tokens" class="resource"><h3 class="resource-heading">Access Tokens<a href="#authentication-access-tokens" class="permalink">&para;</a></h3><div id="authentication-access-tokens-post" class="action post"><h4 class="action-heading"><div class="name">Retrieve an Access Token</div><a href="#authentication-access-tokens-post" class="method post">POST</a><code class="uri">/auth/token</code></h4><p>Use an email/password of an existing user to generate an access token. <strong>The
access token does not expire until the user changes password.</strong></p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>email</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>the email address of the user</p>
</dd><dt>password</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>the corresponding password</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    password: <span class="hljs-string">"foobar"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>email_required</code> (400) - no email address specified</p>
</li>
<li>
<p><code>password_required</code> (400) - no password specified</p>
</li>
<li>
<p><code>wrong_email_password</code> (401) - wrong email address/password combination</p>
</li>
<li>
<p><code>login_attempts_exceeded</code> (403) - there have been too many incorrect email</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    access_token: <span class="hljs-string">"abcdefgh123456789"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="users" class="resource-group"><h2 class="group-heading">Users<a href="#users" class="permalink">&para;</a></h2><div id="users-user" class="resource"><h3 class="resource-heading">User<a href="#users-user" class="permalink">&para;</a></h3><div id="users-user-post" class="action post"><h4 class="action-heading"><div class="name">Register a New User</div><a href="#users-user-post" class="method post">POST</a><code class="uri">/user</code></h4><p>Register a new user, and create a new patient for them as well.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>email</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The email address of the new user. Validated to make sure it’s a valid
email address.</p>
</dd><dt>password</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>the password of the new user</p>
</dd><dt>first_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>the first name of the new user</p>
</dd><dt>last_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>the last name of the new user</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>the phone number of the new user</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    password: <span class="hljs-string">"foobar"</span>,
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Bar"</span>,
    phone: <span class="hljs-string">"6177140000"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>email_required</code> (<code>400</code>) - no email address specified</p>
</li>
<li>
<p><code>password_required</code> (<code>400</code>) - no password specified</p>
</li>
<li>
<p><code>invalid_email</code> (<code>400</code>) - the email address specified is not a valid one</p>
</li>
<li>
<p><code>user_already_exists</code> (<code>400</code>) - there is already a user with that email
address</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Bar"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="users-user-get" class="action get"><h4 class="action-heading"><div class="name">View User Info</div><a href="#users-user-get" class="method get">GET</a><code class="uri">/user</code></h4><p>Get basic metadata about the current user.</p>
<div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in <code>Authorization</code>
header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Bar"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="users-user-put" class="action put"><h4 class="action-heading"><div class="name">Change User Info</div><a href="#users-user-put" class="method put">PUT</a><code class="uri">/user</code></h4><p>Change basic metadata about the current user, including their password.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>first_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new first name</p>
</dd><dt>last_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new last name</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new phone number</p>
</dd><dt>password</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>New password. <strong>Note that if the password is changed, all access tokens are revoked</strong>.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Baz"</span>,
    phone: <span class="hljs-string">"6177140001"</span>,
    password: <span class="hljs-string">"foobaz"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in <code>Authorization</code>
header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Baz"</span>,
    phone: <span class="hljs-string">"6177140001"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="users-user-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete User</div><a href="#users-user-delete" class="method delete">DELETE</a><code class="uri">/user</code></h4><p>Permanently remove the user, including all metadata stored on them (e.g., their password).
Patients accessible only to this user will be deleted, but patients viewable by other users
will not be deleted.</p>
<div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in <code>Authorization</code>
header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    first_name: <span class="hljs-string">"Foo"</span>,
    last_name: <span class="hljs-string">"Bar"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="users-reset-password" class="resource"><h3 class="resource-heading">Reset Password<a href="#users-reset-password" class="permalink">&para;</a></h3><div id="users-reset-password-post" class="action post"><h4 class="action-heading"><div class="name">Reset a User's Password</div><a href="#users-reset-password-post" class="method post">POST</a><code class="uri">/user/reset_password</code></h4><p>Reset password for a specific user. Takes the email address of a user, generates a new
temporary password for them, emails them the new password, and revokes all existing access
tokens.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>email</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The email address of the user whose password should be reset. Must correspond
to an existing user account.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>email_required</code> (<code>400</code>) - no email address specified</p>
</li>
<li>
<p><code>user_not_found</code> (<code>400</code>) - an existing user with that email address was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"foo@bar.com"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="requests" class="resource-group"><h2 class="group-heading">Requests<a href="#requests" class="permalink">&para;</a></h2><p>Each user can request access to another user’s patients. This is done by making a <code>POST</code> request
to <code>/requested</code>, after which the request can be viewed at <code>GET /requested</code> and cancelled at
<code>DELETE /requested/:id</code> if needed.</p>
<p>The user to which the request was made can then view the request at <code>/requests</code> and close it
by making a <code>DELETE</code> request to <code>/requests/:id</code>. As discussed in greater detail below, this
<code>DELETE</code> request should contain a JSON body with either <code>status: accepted</code> or <code>status: rejected</code>
depending on the outcome. Note that <code>DELETE</code>ing the request does not actually share any patients:
that must be done seperately using the <code>POST /patients/:patientid/shares</code> endpoint. This way the
user can choose to selectively share just some of their patients.</p>
<p>Deleted requests are still shown, so the <code>status</code> field should be used to determine between
requests. Possible values are <code>pending</code>, <code>cancelled</code>, <code>accepted</code> and <code>rejected</code>.</p>
<p>Note that if user A requests access from user B, the request ID for user A (at <code>/requested</code>) is
not necessarily the same as the request ID for user B (at <code>/requests</code>).</p>
<div id="requests-requests-from-user" class="resource"><h3 class="resource-heading">Requests From User<a href="#requests-requests-from-user" class="permalink">&para;</a></h3><div id="requests-requests-from-user-post" class="action post"><h4 class="action-heading"><div class="name">Create new Request</div><a href="#requests-requests-from-user-post" class="method post">POST</a><code class="uri">/requested</code></h4><p>Request access to another user’s patients from the current user.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>email</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>email address of the user to request access from</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"another@user.com"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>email_required</code> (400) - an email address must be specified</p>
</li>
<li>
<p><code>invalid_email</code> (400) - the email address specified does not correspond to an existing user</p>
</li>
<li>
<p><code>already_requested</code> (400) - a request has already been made to that user from this user</p>
</li>
<li>
<p><code>cant_request_yourself</code> (400) - a request can’t be made to request sharing with yourself</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"another@user.com"</span>,
    status: <span class="hljs-string">"pending"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="requests-requests-from-user-get" class="action get"><h4 class="action-heading"><div class="name">List Requests</div><a href="#requests-requests-from-user-get" class="method get">GET</a><code class="uri">/requested</code></h4><p>View a list of all requests the current user has made.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>email</code>
and defaults to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>email</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by email address of the user the request was made to. Matches any email
addresses that contain the specified email as a substring.</p>
</dd><dt>status</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by request status (matches exactly).</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_status</code> (400) - the specified status to filter by is not <code>pending</code>, <code>cancelled</code>, <code>accepted</code> or <code>rejected</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    requests: [
        {
            id: <span class="hljs-number">1</span>,
            email: <span class="hljs-string">"another@user.com"</span>
            status: <span class="hljs-string">"pending"</span>,
        },
        ...
    ],
    count: <span class="hljs-number">2</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="requests-request-from-user" class="resource"><h3 class="resource-heading">Request From User<a href="#requests-request-from-user" class="permalink">&para;</a></h3><div id="requests-request-from-user-delete" class="action delete"><h4 class="action-heading"><div class="name">Cancel Request</div><a href="#requests-request-from-user-delete" class="method delete">DELETE</a><code class="uri">/requested/{requestid}</code></h4><p>Cancel an existing request to access another user’s patient data.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>requestid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the request (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_request_id</code> (404)</p>
<p>a request made with the specified ID by the current user was not found, or it was already cancelled or closed</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"another@user.com"</span>,
    status: <span class="hljs-string">"cancelled"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="requests-requests-to-user" class="resource"><h3 class="resource-heading">Requests to User<a href="#requests-requests-to-user" class="permalink">&para;</a></h3><div id="requests-requests-to-user-get" class="action get"><h4 class="action-heading"><div class="name">List Requests</div><a href="#requests-requests-to-user-get" class="method get">GET</a><code class="uri">/requests</code></h4><p>View a list of all requests made to the current user by other users requesting the current user
to share their patient data.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>email</code>
and defaults to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>email</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by email address of the user the request was made from. Matches any email
addresses that contain the specified email as a substring.</p>
</dd><dt>status</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by request status (matches exactly).</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_status</code> (400) - the specified status to filter by is not <code>pending</code>, <code>cancelled</code>, <code>accepted</code> or <code>rejected</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    requests: [
        {
            id: <span class="hljs-number">1</span>,
            email: <span class="hljs-string">"original@user.com"</span>,
            status: <span class="hljs-string">"pending"</span>
        },
        ...
    ],
    count: <span class="hljs-number">2</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="requests-request-to-user" class="resource"><h3 class="resource-heading">Request To User<a href="#requests-request-to-user" class="permalink">&para;</a></h3><div id="requests-request-to-user-delete" class="action delete"><h4 class="action-heading"><div class="name">Close Request</div><a href="#requests-request-to-user-delete" class="method delete">DELETE</a><code class="uri">/requests/{requestid}</code></h4><p>Close a request another user has made to access the current user’s data. A <code>status</code>
key should be sent with this request with a value of either <code>accepted</code> or <code>rejected</code>
indicating the outcome of the request. Note that <code>status</code> is used purely to notify
the user, and <code>status=accepted</code> does not actually share any data with the requesting
user. Instead, that must be done by making requests to the <code>POST /patients/:patientid/shares</code>
endpoint. This way the user can selectively choose to share just some of thier patients.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>requestid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the request (<em>url</em>)</p>
</dd><dt>status</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Outcome of the request. Must be either <code>accepted</code> or <code>rejected</code>.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    status: <span class="hljs-string">"accepted"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_request_id</code> (404)</p>
<p>a request made with the specified ID by the current user was not found, or it was already cancelled or closed</p>
</li>
<li>
<p><code>invalid_status</code> (400) - the <code>status</code> body key must be either <code>accepted</code> or <code>rejected</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"another@user.com"</span>,
    status: <span class="hljs-string">"accepted"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="patients" class="resource-group"><h2 class="group-heading">Patients<a href="#patients" class="permalink">&para;</a></h2><p>Remember, patients are the resources for which we actually store medication/etc
data, rather than users (and we have a many to many association between patients
and users).</p>
<p>When a user is created, a corresponding patient for them is also created. The user can then
optionally create more patients for e.g., children dependents.</p>
<p>Patients can then be shared with other users. There are three levels of sharing: <em>family prime</em>
(<code>prime</code>), <em>family</em> (<code>family</code>) and <em>anyone</em> (<code>anyone</code>). <em>Family prime</em> is intended to represent
family extremely close to the patient (e.g., parents) who should have access to almost everything,
<em>family</em> is intended for wider family of the patient, and <em>anyone</em> is intended for everyone else
(e.g., doctors).</p>
<p>At the patient level, a user’s access to data is determined by which one of the above three groups
they’re a member of.  API requests can be made to set global <em>read</em> (<code>read</code>) or <em>read-write</em> (<code>write</code>)
permissions for each of the three share groups for each patient, as well as an overriding <em>read</em>/<em>write</em>
permission for each user the patient is shared with (so each share has either <code>read</code>, <code>write</code> or <code>default</code>
permissions, where <code>default</code> means to just use the patient-wide permissions for the relevant share group).
However, note that these permissions are all set to sensible defaults: specifically all three share groups
have <code>write</code> access by default, and all users created have <code>default</code> share permissions. Note that this does
not grant every user a patient is shared with full read-write access to their data, because medications
have a slightly more complex permissions structure (described below).</p>
<p>In a patient response object, <code>access_anyone</code>, <code>access_family</code> and <code>access_prime</code> represent the permissions
of the <em>anyone</em>/<em>family</em>/<em>family prime</em> share user groups respectively. The <code>access</code> field denotes
the current user’s access to the patient, and will always be either <code>read</code> or <code>write</code> (if it is set
to <code>default</code>, it will be changed to the relevant value; this is <strong>not</strong> true of the
<code>/patients/:id/share/</code> endpoints).</p>
<p>These generic permissions control access to most of a patient’s resources, but medications, journal
entries, doses and schedules are slightly more complicated. As described in the medications section, each
medication has its own additional set of access controls. For each of their medications, the patient
can explicitly set the access level of <em>family prime</em>, <em>family</em> and <em>anyone</em>. This then controls access
to that medication, any journal entries tagged with that medication, any schedule events for that
medication, and any dose events for that medication.</p>
<p>There are four access levels that can be set for each group on this per-medication basis: <code>read</code>,
<code>write</code>, <code>none</code> and <code>default</code>. <code>read</code> and <code>write</code> behave as they do in a patient-wide context, and <code>none</code> means
that that user group has no access at all to the medication or it’s resources. <code>default</code> is slightly more
complicated: rather than just delegating straight to the patient-level permissions, it has a slightly
different meaning depending on the share group and medication details:</p>
<ul>
<li>
<p>For an <code>anyone</code> share, <code>default</code> gives the user read-only access</p>
</li>
<li>
<p>For a <code>family</code> share on an as-needed medication (including medications that are both regular and as-needed),
<code>default</code> gives the user write access.</p>
</li>
<li>
<p>For a <code>family</code> share on a medication that is not as-needed (so is regular-only), <code>default</code> gives the user
read-only access.</p>
</li>
<li>
<p>For a <code>prime</code> share, <code>default</code> delegates to the patient-level permissions: it first looks at any explicit
permissions specified in the share itself, and if that’s set to <code>default</code> then it looks as <code>access_prime</code> in
the patient data.</p>
</li>
</ul>
<p>There is one exception to this rule. The <em>user</em> who creates a medication is recorded as the <code>creator</code> of that
medication, and they always have write access to that medication (even if, for example, the patient is shared
with the user through the <code>anyone</code> group and the medication has <code>access_anyone=&quot;default&quot;</code> (which would usually give
them read-only access), that user will still have write access).</p>
<p>Each patient returned by the API has an <code>avatar</code> field containing the path of that patient’s
avatar (image) endpoint. As documented below, <code>GET</code>ting this path returns the user’s avatar
(initially a default image) and <code>POST</code>ing to this path with raw image data sets the avatar
to the POSTed data.</p>
<p>Each patient returned also has a <code>creator</code> field (which cannot be modified) containing the email address
of the user who created the patient, and a <code>me</code> boolean field representing whether the patient corresponds
to that user’s “own log”. <code>me</code> is <code>true</code> for the patient automatically created when a user registers,
and <code>false</code> otherwise.</p>
<div id="patients-user-s-patients" class="resource"><h3 class="resource-heading">User's Patients<a href="#patients-user-s-patients" class="permalink">&para;</a></h3><div id="patients-user-s-patients-post" class="action post"><h4 class="action-heading"><div class="name">Create new Patient</div><a href="#patients-user-s-patients-post" class="method post">POST</a><code class="uri">/patients</code></h4><p>Create a new patient, initially shared with the current user with write permissions,
and no-one else. For example, this should be called upon initial setup of the app to
create a patient for the end user, and can later be called to create a new patient representing
the child of the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>first_name</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>the first name of the patient</p>
</dd><dt>last_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>the last name of the patient</p>
</dd><dt>birthdate</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Optional date of birth of the patient, formatted as an ISO 8601 YYYY-MM-DD</p>
</dd><dt>sex</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>String representing sex of the user. Must be “male”, “female”, “other” or “unspecified”.</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Optional phone number of the patient, formatted as a string</p>
</dd><dt>access_anyone</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The default access permissions that users this patient is shared with under the <code>anyone</code>
group should have. Must be either <code>read</code> or <code>write</code>.  Defaults to <code>write</code>.</p>
</dd><dt>access_family</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The default access permissions that users this patient is shared with under the <code>family</code>
group should have. Must be either <code>read</code> or <code>write</code>.  Defaults to <code>write</code>.</p>
</dd><dt>access_prime</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The default access permissions that users this patient is shared with under the <code>prime</code> group
should have. Must be either <code>read</code> or <code>write</code>.  Defaults to <code>write</code>.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    first_name: <span class="hljs-string">"Dependent"</span>,
    last_name: <span class="hljs-string">"Patient"</span>,
    birthdate: <span class="hljs-string">"1990-01-01"</span>,
    sex: <span class="hljs-string">"male"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"write"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>first_name_required</code> (400) - no first name specified</p>
</li>
<li>
<p><code>invalid_sex</code> (400)</p>
<p>the sex field, if passed, must be either <code>male</code>, <code>female</code>, <code>other</code> or <code>unspecified</code></p>
</li>
<li>
<p><code>invalid_birthdate</code> (400) - the birthdate field, if passed, must be a valid <code>YYYY-MM-DD</code> date</p>
</li>
<li>
<p><code>invalid_access_anyone</code> (400) - the <code>access_anyone</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
<li>
<p><code>invalid_access_family</code> (400) - the <code>access_family</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
<li>
<p><code>invalid_access_prime</code> (400) - the <code>access_prime</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    first_name: <span class="hljs-string">"Dependent"</span>,
    last_name: <span class="hljs-string">"Patient"</span>,
    birthdate: <span class="hljs-string">"1990-01-01"</span>,
    sex: <span class="hljs-string">"male"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    avatar: <span class="hljs-string">"/v1/patients/1/avatar.jpg"</span>,
    creator: <span class="hljs-string">"foo@bar.com"</span>,
    me: <span class="hljs-literal">true</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"owner"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-user-s-patients-get" class="action get"><h4 class="action-heading"><div class="name">List Patients</div><a href="#patients-user-s-patients-get" class="method get">GET</a><code class="uri">/patients</code></h4><p>View a list of all patients the current user has access to (either read or write).</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code>, <code>first_name</code> or <code>last_name</code>,
and defaults to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>first_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by first name of patient. Performs fuzzy matching.</p>
</dd><dt>last_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by last name of patient. Performs fuzzy matching.</p>
</dd><dt>group</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by group of patient. Matches exactly.</p>
</dd><dt>creator</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by email address of creator. Matches any email addresses that
contain the specified email as a substring.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_group</code> (400)</p>
<p>the specified group to filter by is invalid (must be <code>owner</code>, <code>anyone</code>,
<code>family</code> or <code>prime</code>)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    patients: [
        {
            id: <span class="hljs-number">1</span>,
            first_name: <span class="hljs-string">"Dependent"</span>,
            last_name: <span class="hljs-string">"Patient"</span>,
            birthdate: <span class="hljs-string">"1990-01-01"</span>,
            sex: <span class="hljs-string">"male"</span>,
            phone: <span class="hljs-string">"6177140000"</span>,
            avatar: <span class="hljs-string">"/v1/patients/1/avatar.jpg"</span>,
            creator: <span class="hljs-string">"foo@bar.com"</span>,
            me: <span class="hljs-literal">true</span>,
            access_anyone: <span class="hljs-string">"read"</span>,
            access_family: <span class="hljs-string">"read"</span>,
            access_prime: <span class="hljs-string">"write"</span>,
            access: <span class="hljs-string">"write"</span>,
            group: <span class="hljs-string">"owner"</span>
        },
        ...
    ],
    count: <span class="hljs-number">2</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-patient" class="resource"><h3 class="resource-heading">Patient<a href="#patients-patient" class="permalink">&para;</a></h3><div id="patients-patient-get" class="action get"><h4 class="action-heading"><div class="name">View Patient Info</div><a href="#patients-patient-get" class="method get">GET</a><code class="uri">/patients/{patientid}</code></h4><p>View the name of a specific patient as well as the current user’s access (<code>read</code> or
<code>write</code>) to them, and the group the patient is shared with them through (either <code>owner</code>,
<code>prime</code>, <code>family</code> or <code>anyone</code>). To view and modify other user’s access to this patient, see the
<code>/patients/{id}/shares</code> endpoint.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    first_name: <span class="hljs-string">"Dependent"</span>,
    last_name: <span class="hljs-string">"Patient"</span>,
    birthdate: <span class="hljs-string">"1990-01-01"</span>,
    sex: <span class="hljs-string">"male"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    avatar: <span class="hljs-string">"/v1/patients/1/avatar.jpg"</span>,
    creator: <span class="hljs-string">"foo@bar.com"</span>,
    me: <span class="hljs-literal">true</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"prime"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-patient-put" class="action put"><h4 class="action-heading"><div class="name">Update Patient Info</div><a href="#patients-patient-put" class="method put">PUT</a><code class="uri">/patients/{patientid}</code></h4><p>Update a patients’ details. This requires the user to have <code>write</code> access to the patient.
Name, group and access level can be modified here. The access level can be modified in
two ways: setting <code>access</code> (to <code>read</code>, <code>write</code>, <code>none</code> or <code>default</code>) will set the access level the
current user has to the patient, and setting <code>access_prime</code>, <code>access_family</code> or <code>access_anyone</code>
(to <code>read</code> or <code>write</code>) will set the group-wide access levels for the patient.</p>
<p>The owner of a patient cannot change their access level from <code>write</code> or their group from <code>owner</code>.</p>
<p>Setting <code>access</code> to <code>none</code> will stop sharing the patient with the current user.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd><dt>first_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new first name of the patient</p>
</dd><dt>last_name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new last name of the patient</p>
</dd><dt>birthdate</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Optional date of birth of the patient, formatted as an ISO 8601 YYYY-MM-DD</p>
</dd><dt>sex</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>String representing sex of the patient. Must be “male”, “female”, “other” or “unspecified”.</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>New phone number of the patient</p>
</dd><dt>access</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Explicitly set the patient’s access level to <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code>.
<code>none</code> stops sharing the patient with the user. <strong>This is permanent and potentially
irreversible, and hence should be used with caution</strong>.</p>
</dd><dt>group</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Change the group of the current user. If the user is the <code>owner</code>, their group cannot be changed.
Otherwise, the group can be changed between <code>prime</code>, <code>family</code> and <code>anyone</code>.</p>
</dd><dt>access_anyone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Change the access level of the <code>anyone</code> user share group. Must be either <code>read</code> or <code>write</code>.</p>
</dd><dt>access_family</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Change the access level of the <code>family</code> user share group. Must be either <code>read</code> or <code>write</code>.</p>
</dd><dt>access_prime</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Change the access level of the <code>prime</code> user share group. Must be either <code>read</code> or <code>write</code>.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    first_name: <span class="hljs-string">"Gin"</span>,
    last_name: <span class="hljs-string">"Smith"</span>,
    birthdate: <span class="hljs-string">"1991-01-01"</span>,
    sex: <span class="hljs-string">"female"</span>,
    phone: <span class="hljs-string">"6177140001"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"family"</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"read"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_sex</code> (400)</p>
<p>the sex field, if passed, must be either <code>male</code>, <code>female</code>, <code>other</code> or <code>unspecified</code></p>
</li>
<li>
<p><code>invalid_birthdate</code> (400) - the birthdate field, if passed, must be a valid <code>YYYY-MM-DD</code> date</p>
</li>
<li>
<p><code>invalid_access</code> (400) - the access field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_group</code> (400) - the group field, if passed, must be either <code>prime</code>, <code>family</code> or <code>anyone</code></p>
</li>
<li>
<p><code>is_owner</code> (400) - the share belongs to the user owning the patient so cannot be changed</p>
</li>
<li>
<p><code>invalid_access_anyone</code> (400) - the <code>access_anyone</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
<li>
<p><code>invalid_access_family</code> (400) - the <code>access_family</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
<li>
<p><code>invalid_access_prime</code> (400) - the <code>access_prime</code> field, if passed, must be either <code>read</code> or <code>write</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    first_name: <span class="hljs-string">"Gin"</span>,
    last_name: <span class="hljs-string">"Smith"</span>,
    birthdate: <span class="hljs-string">"1991-01-01"</span>,
    sex: <span class="hljs-string">"female"</span>,
    phone: <span class="hljs-string">"6177140001"</span>,
    avatar: <span class="hljs-string">"/v1/patients/1/avatar.jpg"</span>,
    creator: <span class="hljs-string">"foo@bar.com"</span>,
    me: <span class="hljs-literal">true</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"read"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"family"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-patient-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete Patient</div><a href="#patients-patient-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}</code></h4><p>Remove a patient for whom the user is the owner. <strong>This permanently removes the patient, all
of their associated habits, doctors, pharmacies, medications and dose events <em>for all
users the patient is shared with</em></strong> and as such should be used with extreme caution.</p>
<p>To completely remove a patient from the user’s sphere of influence, note that <code>PUT</code> should be
called with <code>access=&quot;none&quot;</code> rather than this method.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    first_name: <span class="hljs-string">"Gin"</span>,
    last_name: <span class="hljs-string">"Smith"</span>,
    birthdate: <span class="hljs-string">"1991-01-01"</span>,
    sex: <span class="hljs-string">"female"</span>,
    phone: <span class="hljs-string">"6177140001"</span>,
    avatar: <span class="hljs-string">"/v1/patients/1/avatar.jpg"</span>,
    creator: <span class="hljs-string">"foo@bar.com"</span>,
    me: <span class="hljs-literal">true</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"owner"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-patient-report" class="resource"><h3 class="resource-heading">Patient Report<a href="#patients-patient-report" class="permalink">&para;</a></h3><div id="patients-patient-report-get" class="action get"><h4 class="action-heading"><div class="name">Generate Report</div><a href="#patients-patient-report-get" class="method get">GET</a><code class="uri">/patients/{patientid}.pdf</code></h4><p>View a PDF report of the patient’s medications and dosage logs. Only those journal
entries, medications and dose events that the user has read access to (remember medications can
override patient-wide access permissions) are shown.</p>
<p>Report is returned as a PDF file with <code>Content-Type: &quot;application/pdf&quot;</code>.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific)</p>
</dd><dt>start_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p><code>YYYY-MM-DD</code> (in patient’s local timezone) of the date to start the report from. Defaults to the start
of the current month, or the start of the month <code>end_date</code> is in if <code>end_date</code> is specified.</p>
</dd><dt>end_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p><code>YYYY-MM-DD</code> (in patient’s local timezone) of the date to start the report from. Defaults to the end
of the current month, or the end of the month <code>start_date</code> is in if <code>start_date</code> is specified.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_start</code> (400) - invalid <code>YYYY-MM-DD</code> value for <code>start_date</code></p>
</li>
<li>
<p><code>invalid_end</code> (400) - invalid <code>YYYY-MM-DD</code> value for <code>end_date</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>raw PDF data</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-patient-data-dump" class="resource"><h3 class="resource-heading">Patient Data Dump<a href="#patients-patient-data-dump" class="permalink">&para;</a></h3><div id="patients-patient-data-dump-get" class="action get"><h4 class="action-heading"><div class="name">View JSON Data Dump</div><a href="#patients-patient-data-dump-get" class="method get">GET</a><code class="uri">/patients/{patientid}.json</code></h4><p>View a data dump of all data associated with a patient (specifically the patient metadata,
habits, journal entries, doctors, pharmacies, medications and dose events). Only those journal
entries, medications and dose events that the user has read access to (remember medications can
override patient-wide access permissions) are shown.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific)</p>
</dd><dt>start_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p><code>YYYY-MM-DD</code> (in patient’s local timezone) of the date to start the dump from. Defaults to the start
of the current month, or the start of the month <code>end_date</code> is in if <code>end_date</code> is specified.</p>
</dd><dt>end_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p><code>YYYY-MM-DD</code> (in patient’s local timezone) of the date to start the dump from. Defaults to the end
of the current month, or the end of the month <code>start_date</code> is in if <code>start_date</code> is specified.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_start</code> (400) - invalid <code>YYYY-MM-DD</code> value for <code>start_date</code></p>
</li>
<li>
<p><code>invalid_end</code> (400) - invalid <code>YYYY-MM-DD</code> value for <code>end_date</code></p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">34</span>,
    first_name: <span class="hljs-string">"Patient 11"</span>,
    last_name: <span class="hljs-string">"number 11"</span>,
    birthdate: <span class="hljs-string">"1990-01-01"</span>,
    sex: <span class="hljs-string">"male"</span>,
    phone: <span class="hljs-string">"6177140000"</span>,
    avatar: <span class="hljs-string">"/v1/patients/34/avatar.png"</span>,
    creator: <span class="hljs-string">"foo@bar.com"</span>,
    me: <span class="hljs-literal">true</span>,
    access_anyone: <span class="hljs-string">"read"</span>,
    access_family: <span class="hljs-string">"read"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"anyone"</span>,
    access: <span class="hljs-string">"read"</span>,
    habits: {
        wake: <span class="hljs-literal">null</span>,
        sleep: <span class="hljs-literal">null</span>,
        breakfast: <span class="hljs-literal">null</span>,
        lunch: <span class="hljs-literal">null</span>,
        dinner: <span class="hljs-literal">null</span>,
        tz: <span class="hljs-string">"Etc/UTC"</span>
    },
    entries: [
        {
            date: <span class="hljs-string">"2015-07-15T13:18:21.000-04:00"</span>,
            text: <span class="hljs-string">"example journal entry"</span>,
            medication_ids: [
                <span class="hljs-number">1</span>
            ],
            mood: <span class="hljs-string">""</span>,
            id: <span class="hljs-number">1</span>
        }
    ],
    doctors: [
        {
            name: <span class="hljs-string">"test doctor"</span>,
            phone: <span class="hljs-string">""</span>,
            address: <span class="hljs-string">""</span>,
            notes: <span class="hljs-string">""</span>,
            id: <span class="hljs-number">1</span>
        }
    ],
    pharmacies: [
        {
            name: <span class="hljs-string">"test pharmacy"</span>,
            phone: <span class="hljs-string">""</span>,
            address: <span class="hljs-string">""</span>,
            hours: {
                monday: {},
                tuesday: {},
                wednesday: {},
                thursday: {},
                friday: {},
                saturday: {},
                sunday: {}
            },
            notes: <span class="hljs-string">""</span>,
            id: <span class="hljs-number">1</span>
        }
    ],
    medications: [
        {
            name: <span class="hljs-string">"test medication"</span>,
            rx_norm: <span class="hljs-string">""</span>,
            rx_number: <span class="hljs-string">""</span>,
            ndc: <span class="hljs-string">""</span>,
            dose: {
                quantity: <span class="hljs-number">1</span>,
                unit: <span class="hljs-string">"dose"</span>
            },
            route: <span class="hljs-string">""</span>,
            form: <span class="hljs-string">""</span>,
            quantity: <span class="hljs-number">1</span>,
            type: <span class="hljs-string">""</span>,
            fill_date: <span class="hljs-literal">null</span>,
            doctor_id: <span class="hljs-literal">null</span>,
            pharmacy_id: <span class="hljs-literal">null</span>,
            access_anyone: <span class="hljs-string">"default"</span>,
            access_family: <span class="hljs-string">"default"</span>,
            access_prime: <span class="hljs-string">"default"</span>,
            number_left: <span class="hljs-literal">null</span>,
            schedule: {
                as_needed: <span class="hljs-literal">true</span>,
                regularly: <span class="hljs-literal">false</span>
            },
            id: <span class="hljs-number">1</span>
        }
    ],
    doses: [
        {
            medication_id: <span class="hljs-number">1</span>,
            date: <span class="hljs-string">"2015-07-15T13:18:21.000-04:00"</span>,
            notes: <span class="hljs-string">""</span>,
            id: <span class="hljs-number">1</span>
        }
    ],
    shares: [
        {
            is_user: <span class="hljs-literal">true</span>,
            access: <span class="hljs-string">"write"</span>,
            group: <span class="hljs-string">"owner"</span>,
            email: <span class="hljs-string">"foo26@bar.com"</span>,
            id: <span class="hljs-number">42</span>
        },
        {
            is_user: <span class="hljs-literal">true</span>,
            access: <span class="hljs-string">"default"</span>,
            group: <span class="hljs-string">"anyone"</span>,
            email: <span class="hljs-string">"foo25@bar.com"</span>,
            id: <span class="hljs-number">43</span>
        }
    ],
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-patient-s-avatar" class="resource"><h3 class="resource-heading">Patient's Avatar<a href="#patients-patient-s-avatar" class="permalink">&para;</a></h3><div id="patients-patient-s-avatar-get" class="action get"><h4 class="action-heading"><div class="name">View Patient Avatar</div><a href="#patients-patient-s-avatar-get" class="method get">GET</a><code class="uri">/patients/{patientid}/avatar(.ext)</code></h4><p>View the image avatar of a specific patient. File extensions can be added to the URL
(for example, <code>/patients/1/avatar.jpg</code>, <code>/patients/1/avatar.gif</code>) but the image
<strong>will not</strong> be converted to the format associated with the extension, but instead
just returned in whatever format it was stored in. The URL in the avatar field in
a patient’s details will <strong>automatically include the correct extension</strong> for the image.</p>
<p>The user needs read access to the patient.</p>
<p>The <code>Content-Type</code> header will be populated with the correct MIME type.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>raw image data</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-patient-s-avatar-post" class="action post"><h4 class="action-heading"><div class="name">Upload Patient Avatar</div><a href="#patients-patient-s-avatar-post" class="method post">POST</a><code class="uri">/patients/{patientid}/avatar(.ext)</code></h4><p>Upload the image avatar of a specific patient. Again, file extensions can be added to
the URL but are ignored and will not be used to convert the image format. Note that for this
endpoint, raw binary data should be <code>POST</code>ed rather than <code>application/json</code>-encoded data.</p>
<p>The user needs write access to the patient.</p>
<p>Also note that this endpoint uses <code>POST</code> not <code>PUT</code> contrary to REST resource routing
conventions.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>raw image data</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_image</code> (400) - the POSTed data is an invalid image</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    success: <span class="hljs-literal">true</span>,
    avatar: <span class="hljs-string">"/v1/patients/1/avatar.gif"</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-patient-s-shared-users" class="resource"><h3 class="resource-heading">Patient's Shared Users<a href="#patients-patient-s-shared-users" class="permalink">&para;</a></h3><p>This endpoint represents all of the users a specific patient is shared with: including
both <code>read</code> and <code>write</code> access. The IDs in this section represent patient-user relationships,
not users themselves, so if patient <code>1</code> is shared with user <code>7</code> then the shared ID may be <code>16</code>,
rather than <code>7</code>.</p>
<div id="patients-patient-s-shared-users-post" class="action post"><h4 class="action-heading"><div class="name">Share with a User</div><a href="#patients-patient-s-shared-users-post" class="method post">POST</a><code class="uri">/patients/{patientid}/shares</code></h4><p>Share a patient’s data (a patient for whom the user has write access) with a new user specified by
email address. This user <em>can</em> be an existing app user, but is not required to be: if they are then
they’re automatically granted access to the patient’s data, and if they’re not they’re sent an email
invitation to install the app, and once they do they’ll receive automatic access to the patient’s data.
The <code>is_user</code> field in the response distinguishes between the two cases: it’s true in the case
of an existing user, and false in the case of a new user who’s been invited.</p>
<p>An example use case here would be a mother (the user) wanting to share her child’s (the
patient’s) data with the father (another user).</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd><dt>email</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>the email address of the user to share data with</p>
</dd><dt>access</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p><code>read</code>, <code>write</code> or <code>default</code> to signify the level of access the user should have to the patient
(<code>default</code> means the user has whatever access to the patient the patient-wide permissions
give them, whereas <code>read</code> and <code>write</code> explicitly override those patient-wide permissions)</p>
</dd><dt>group</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The share group to add the user to. Must be either <code>prime</code>, <code>family</code> or <code>anyone</code>.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    email: <span class="hljs-string">"care@giver.com"</span>,
    access: <span class="hljs-string">"read"</span>,
    group: <span class="hljs-string">"family"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>email_required</code> (400) - an email address to share with must be specified</p>
</li>
<li>
<p><code>invalid_email</code> (400) - the email address specified is not a valid one</p>
</li>
<li>
<p><code>access_required</code> (400) - the desired access level must be specified</p>
</li>
<li>
<p><code>invalid_access</code> (400) - the access string specified is not a valid one (must be either <code>read</code>, <code>write</code> or <code>default</code>)</p>
</li>
<li>
<p><code>group_required</code> (400) - the share group the user should be added to must be specified</p>
</li>
<li>
<p><code>invalid_group</code> (400) - the share group the user is not a valid one (must be either <code>prime</code>, <code>family</code> or <code>anyone</code>)</p>
</li>
</ul>
<p>Note that this <code>id</code> is for the user-patient association, <em>not</em> the user ID.</p>
<p><code>is_user</code> (<code>boolean</code>) signifies whether the user is already an existing
user of the app, or whether they’ve been sent an email inviting them to sign up.</p>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"care@giver.com"</span>,
    access: <span class="hljs-string">"read"</span>,
    group: <span class="hljs-string">"family"</span>,
    is_user: <span class="hljs-literal">true</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-patient-s-shared-users-get" class="action get"><h4 class="action-heading"><div class="name">List all Shared Users</div><a href="#patients-patient-s-shared-users-get" class="method get">GET</a><code class="uri">/patients/{patientid}/shares</code></h4><p>For a patient whom the user has <code>read</code> access, get a list of all users (including the current one)
who have (either <code>read</code> or <code>write</code>) access to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>email</code>, and defaults
to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>email</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by email address of user. Matches any email addresses that
contain the specified email as a substring.</p>
</dd><dt>is_user</dt><dd><code>boolean</code>&nbsp;<span>(optional)</span>&nbsp;<p>filter results by selecting only user that are existing users (as opposed to those
who’ve been invited but still haven’t signed up)</p>
</dd><dt>access</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>filter results by selecting only users with the specified level of access (either
<code>read</code> or <code>write</code>)</p>
</dd><dt>group</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>filter results by selecting only users who are part of the specified share group (either
<code>owner</code>, <code>prime</code>, <code>family</code> or <code>anyone</code>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_is_user</code> (400) - the specified is_user value to filter by is invalid</p>
</li>
<li>
<p><code>invalid_access</code> (400) - the specified access value to filter by is invalid</p>
</li>
<li>
<p><code>invalid_group</code> (400) - the specified group value to filter by is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    shares: [
        {
            id: <span class="hljs-number">1</span>,
            email: <span class="hljs-string">"care@giver.com"</span>,
            access: <span class="hljs-string">"write"</span>,
            group: <span class="hljs-string">"family"</span>,
            is_user: <span class="hljs-literal">true</span>
        },
        ...
    ],
    count: <span class="hljs-number">2</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="patients-shared-user" class="resource"><h3 class="resource-heading">Shared User<a href="#patients-shared-user" class="permalink">&para;</a></h3><div id="patients-shared-user-put" class="action put"><h4 class="action-heading"><div class="name">Update Access Level</div><a href="#patients-shared-user-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/shares/{shareid}</code></h4><p>Update the access another user has to a patient (the current user of course is required
to have <code>write</code> access to this patient). To modify the current user’s access, see the
convenience method <code>PUT /patients/:patientid</code>.</p>
<p>Neither access nor group can be modified for the share for a user who owns a patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd><dt>shareid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient-user association (<strong>not</strong> the user ID) (<em>url</em>)</p>
</dd><dt>access</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p><code>read</code>, <code>write</code> or <code>default</code> to signify the new level of access the specified user should have to the patient</p>
</dd><dt>group</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p><code>anyone</code>, <code>family</code> or <code>prime</code> to signify the new sharing group the specified user should be a member of</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"family"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_share_id</code> (404)</p>
<p>A patient-user sharing relationship with the specified ID was not found (remember, this is <em>not</em>
the same as the user ID)</p>
</li>
<li>
<p><code>invalid_access</code> (400) - the specified access value to change to is invalid</p>
</li>
<li>
<p><code>invalid_group</code> (400) - the specified group value to change to is invalid</p>
</li>
<li>
<p><code>is_owner</code> (400) - the share belongs to the user owning the patient so cannot be modified</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"care@giver.com"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"family"</span>,
    is_user: <span class="hljs-literal">true</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="patients-shared-user-delete" class="action delete"><h4 class="action-heading"><div class="name">Stop Sharing with User</div><a href="#patients-shared-user-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/shares/{shareid}</code></h4><p>Stop sharing the specified patient’s data with a specified user. The current user will
of course need write access to the patient. To stop sharing a patient with the <em>current</em>
user, see the convenience method <code>PUT /patients/:patientid</code>.</p>
<p>The owner’s share cannot be deleted.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<strong>not</strong> user-specific) (<em>url</em>)</p>
</dd><dt>shareid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient-user association (<strong>not</strong> the user ID) (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_share_id</code> (404)</p>
<p>A patient-user sharing relationship with the specified ID was not found (remember, this is <em>not</em>
the same as the user ID)</p>
</li>
<li>
<p><code>is_owner</code> (400) - the share belongs to the user owning the patient so cannot be removed</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    email: <span class="hljs-string">"care@giver.com"</span>,
    access: <span class="hljs-string">"write"</span>,
    group: <span class="hljs-string">"family"</span>,
    is_user: <span class="hljs-literal">true</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="habits" class="resource-group"><h2 class="group-heading">Habits<a href="#habits" class="permalink">&para;</a></h2><div id="habits-patient-habits" class="resource"><h3 class="resource-heading">Patient Habits<a href="#habits-patient-habits" class="permalink">&para;</a></h3><p>Habits are real-life <em>preferences</em> of the patient: what time they usually wake up
in the morning, what time they usually eat lunch, and so on. Exactly one set of
preferences is stored for each patient. The current user will need read access
to the patient to view the habits, and write access to set them.</p>
<p>Habits must be in the specific <code>HH:MM a</code> format; for example, <code>03:59 am</code> and <code>11:20 pm</code>.
These times are in the <em>local timezone</em> of the patient, and will not change if the
timezone is updated (for example, if <code>breakfast</code> is set to <code>10:00 am</code> while the timezone
is <code>London/Europe</code>, <code>breakfast</code> will remain as <code>10:00 am</code> if the timezone is updated to
<code>America/New_York</code>. This signifies that if medication is to be taken with food at
breakfast every morning, the patient should continue doing that even if the timezone shifts).</p>
<p>Habits (all may be blank, and initially are after registration):</p>
<ul>
<li>
<p><code>wake</code> (<em>time</em>) - what time the patient normally wakes up in the morning</p>
</li>
<li>
<p><code>sleep</code> (<em>time</em>) - what time the patient normally goes to sleep at night</p>
</li>
<li>
<p><code>breakfast</code> (<em>time</em>) - what time the patient normally eats breakfast</p>
</li>
<li>
<p><code>lunch</code> (<em>time</em>) - what time the patient normally eats lunch</p>
</li>
<li>
<p><code>dinner</code> (<em>time</em>) - what time the patient normally eats dinner</p>
</li>
<li>
<p><code>tz</code> (<em>timezone</em>) - the current timezone of the patient (retrieved automatically
from the mobile OS without any user participation required). Should be a valid TZ
database timezone (e.g., <code>/London/Europe</code>). Defaults to <code>Etc/UTC</code> (UTC time).</p>
</li>
</ul>
<div id="habits-patient-habits-get" class="action get"><h4 class="action-heading"><div class="name">Get Patient Habits</div><a href="#habits-patient-habits-get" class="method get">GET</a><code class="uri">/patients/{patientid}/habits</code></h4><p>View the patient’s current habits.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in <code>Authorization</code>
header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    wake: <span class="hljs-string">"07:00 am"</span>,
    sleep: <span class="hljs-string">"11:00 pm"</span>,
    breakfast: <span class="hljs-string">"08:00 am"</span>,
    lunch: <span class="hljs-string">"12:00 pm"</span>,
    dinner: <span class="hljs-string">"07:00 pm"</span>,
    tz: <span class="hljs-string">"Etc/UTC"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="habits-patient-habits-put" class="action put"><h4 class="action-heading"><div class="name">Set Patient Habits</div><a href="#habits-patient-habits-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/habits</code></h4><p>Set the patient’s habits. The current user will need write access to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>wake</dt><dd><code>time</code>&nbsp;<span>(optional)</span>&nbsp;<p>what time the patient normally wakes up in the morning</p>
</dd><dt>sleep</dt><dd><code>time</code>&nbsp;<span>(optional)</span>&nbsp;<p>what time the patient normally goes to sleep at night</p>
</dd><dt>breakfast</dt><dd><code>time</code>&nbsp;<span>(optional)</span>&nbsp;<p>what time the patient normally eats breakfast</p>
</dd><dt>lunch</dt><dd><code>time</code>&nbsp;<span>(optional)</span>&nbsp;<p>what time the patient normally eats lunch</p>
</dd><dt>dinner</dt><dd><code>time</code>&nbsp;<span>(optional)</span>&nbsp;<p>what time the patient normally eats dinner</p>
</dd><dt>tz</dt><dd><code>timezone</code>&nbsp;<span>(optional)</span>&nbsp;<p>the current user timezone</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    wake: <span class="hljs-string">"06:00 am"</span>,
    sleep: <span class="hljs-string">"10:00 pm"</span>,
    breakfast: <span class="hljs-string">"07:00 am"</span>,
    lunch: <span class="hljs-string">"11:00 am"</span>,
    tz: <span class="hljs-string">"London/Europe"</span>,
    dinner: <span class="hljs-string">"06:00 pm"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in <code>Authorization</code>
header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_wake</code> (400) - the wake time passed is not formatted as <code>HH:MM</code></p>
</li>
<li>
<p><code>invalid_sleep</code> (400) - the wake time passed is not formatted as <code>HH:MM</code></p>
</li>
<li>
<p><code>invalid_breakfast</code> (400) - the wake time passed is not formatted as <code>HH:MM</code></p>
</li>
<li>
<p><code>invalid_lunch</code> (400) - the wake time passed is not formatted as <code>HH:MM</code></p>
</li>
<li>
<p><code>invalid_dinner</code> (400) - the wake time passed is not formatted as <code>HH:MM</code></p>
</li>
<li>
<p><code>invalid_tz</code> (400) - the timezone passed is not a valid TZ database timezone</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    wake: <span class="hljs-string">"06:00 am"</span>,
    sleep: <span class="hljs-string">"10:00 pm"</span>,
    breakfast: <span class="hljs-string">"07:00 am"</span>,
    lunch: <span class="hljs-string">"11:00 am"</span>,
    dinner: <span class="hljs-string">"06:00 pm"</span>,
    tz: <span class="hljs-string">"London/Europe"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="journal-entries" class="resource-group"><h2 class="group-heading">Journal Entries<a href="#journal-entries" class="permalink">&para;</a></h2><p>Basic free-text journal for the patient to enter notes about their day and such in.
While medications can be tagged in journal entries, entries that correspond
exactly to dose events should probably just be stored in the <code>notes</code> field of a
dose event.</p>
<p><em>Hashtags</em> are parsed from each journal entry and returned in a <code>hashtags</code> array of
<code>string</code>s.</p>
<div id="journal-entries-journal-entries" class="resource"><h3 class="resource-heading">Journal Entries<a href="#journal-entries-journal-entries" class="permalink">&para;</a></h3><div id="journal-entries-journal-entries-post" class="action post"><h4 class="action-heading"><div class="name">Create an Entry</div><a href="#journal-entries-journal-entries-post" class="method post">POST</a><code class="uri">/patients/{patientid}/journal</code></h4><p>Store details of a new journal entry (the current user will need write access to <strong>both</strong>
the patient and every medication in <code>medication_ids</code>).</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>date</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<span class="text-muted example"><strong>Example:&nbsp;</strong><span>2015-05-31T19:27:09+00:00</span></span><p>ISO 8601 combined date-time in UTC representing the date and time to be associated
with the journal entry. Should probably allow user entry of this, but default to the time
the user wrote the entry.</p>
</dd><dt>text</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>free-form text field.</p>
</dd><dt>medication_ids</dt><dd><code>integers</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional list of medication IDs to ‘tag’ the journal entry with</p>
</dd><dt>mood</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>mood of the patient as they wrote the journal entry</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an amazing day today, perhaps thanks in part to taking one more #Adderall than I was meant to this morning!! I #love you #Orange guys soooo much it's insane, but I should probably #go now to avoid #typing #too #much #hashtags #omgilovehashtags #Adderall"</span>,
    medication_ids: [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>],
    mood: <span class="hljs-string">"Happy"</span>,
    hashtags: [<span class="hljs-string">"Adderall"</span>, <span class="hljs-string">"love"</span>, <span class="hljs-string">"Orange"</span>, <span class="hljs-string">"go"</span>, <span class="hljs-string">"typing"</span>, <span class="hljs-string">"too"</span>, <span class="hljs-string">"much"</span>, <span class="hljs-string">"hashtags"</span>, <span class="hljs-string">"omgilovehashtags"</span>],
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>text_required</code> (400) - text for the journal entry must be provided</p>
</li>
<li>
<p><code>date_required</code> (400) - a datetime for the entry must be provided</p>
</li>
<li>
<p><code>invalid_date</code> (400) - the date given is not in valid ISO 8601 format</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - the medications list contains an invalid entry for which a corresponding medication cannot be found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an amazing day today, perhaps thanks in part to taking one more #Adderall than I was meant to this morning!! I #love you #Orange guys soooo much it's insane, but I should probably #go now to avoid #typing #too #much #hashtags #omgilovehashtags #Adderall"</span>,
    medication_ids: [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>],
    mood: <span class="hljs-string">"Happy"</span>,
    hashtags: [<span class="hljs-string">"Adderall"</span>, <span class="hljs-string">"love"</span>, <span class="hljs-string">"Orange"</span>, <span class="hljs-string">"go"</span>, <span class="hljs-string">"typing"</span>, <span class="hljs-string">"too"</span>, <span class="hljs-string">"much"</span>, <span class="hljs-string">"hashtags"</span>, <span class="hljs-string">"omgilovehashtags"</span>],
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="journal-entries-journal-entries-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve all Entries</div><a href="#journal-entries-journal-entries-get" class="method get">GET</a><code class="uri">/patients/{patientid}/journal</code></h4><p>Get a list of all journal events for the patient. Includes full information on each,
but each medication ID in <code>medication_ids</code> is not expanded out into a full medication
object. To call this endpoint successfully, the user will need read access to the patient.
Further, each journal entry will only be shown if the user has read access to all medications
tagged in that journal entry.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>date</code>, and defaults
to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>start_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to entries that took place after this date. Must be
a valid ISO 8601 datetime. Defaults to 0.</p>
</dd><dt>end_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to entries that took place before this date. Must be
a valid ISO 8601 datetime. Defaults to infinity.</p>
</dd><dt>medication_ids</dt><dd><code>array of integers</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to journal entries that include (at least all of) these
medications.</p>
</dd><dt>text</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to journal entries containing this text (fuzzy-matching)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_start</code> (400) - the specified start date is an invalid ISO 8601 datetime</p>
</li>
<li>
<p><code>invalid_end</code> (400) - the specified end date is an invalid ISO 8601 datetime</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - the medications list contains an invalid entry for which a corresponding medication cannot be found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    entries: [
        {
            id: <span class="hljs-number">1</span>,
            date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
            text: <span class="hljs-string">"Had an amazing day today, perhaps thanks in part to taking one more Adderall than I was meant to this morning!! I #love you #Orange guys soooo much it's insane, but I should probably #go now to avoid #typing #too #much #hashtags #omgilovehashtags #Adderall"</span>,
            mood: <span class="hljs-string">"Happy"</span>,
            hashtags: [<span class="hljs-string">"Adderall"</span>, <span class="hljs-string">"love"</span>, <span class="hljs-string">"Orange"</span>, <span class="hljs-string">"go"</span>, <span class="hljs-string">"typing"</span>, <span class="hljs-string">"too"</span>, <span class="hljs-string">"much"</span>, <span class="hljs-string">"hashtags"</span>, <span class="hljs-string">"omgilovehashtags"</span>],
            medication_ids: [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>]
        },
        ...
    ],
    count: <span class="hljs-number">46</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="journal-entries-journal-entry" class="resource"><h3 class="resource-heading">Journal Entry<a href="#journal-entries-journal-entry" class="permalink">&para;</a></h3><div id="journal-entries-journal-entry-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve One Entry</div><a href="#journal-entries-journal-entry-get" class="method get">GET</a><code class="uri">/patients/{patientid}/journal/{journalid}</code></h4><p>View information on an individual journal entry. <code>medication_ids</code> is helpfully
expanded out into <code>medications</code>. The current user will need read access to <strong>both</strong>
the patient’s data and all medications tagged in <code>medication_ids</code>.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>journalid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the journal entry</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_journal_id</code> (404) - an entry with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an amazing day today, perhaps thanks in part to taking one more Adderall than I was meant to this morning!! I #love you #Orange guys soooo much it's insane, but I should probably #go now to avoid #typing #too #much #hashtags #omgilovehashtags #Adderall"</span>,
    mood: <span class="hljs-string">"Happy"</span>,
    hashtags: [<span class="hljs-string">"Adderall"</span>, <span class="hljs-string">"love"</span>, <span class="hljs-string">"Orange"</span>, <span class="hljs-string">"go"</span>, <span class="hljs-string">"typing"</span>, <span class="hljs-string">"too"</span>, <span class="hljs-string">"much"</span>, <span class="hljs-string">"hashtags"</span>, <span class="hljs-string">"omgilovehashtags"</span>],
    medications: [
        {
            id: <span class="hljs-number">1</span>,
            name: <span class="hljs-string">"Loratadine"</span>,
            rx_norm: <span class="hljs-string">"324026"</span>,
            pharmacy_id: <span class="hljs-number">1</span>
        },
        {
            id: <span class="hljs-number">4</span>,
            name: <span class="hljs-string">"Adderall"</span>,
            rx_norm: <span class="hljs-string">"123456789"</span>,
            pharmacy_id: <span class="hljs-number">7</span>
        }
    ],
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="journal-entries-journal-entry-put" class="action put"><h4 class="action-heading"><div class="name">Change an Entry</div><a href="#journal-entries-journal-entry-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/journal/{journalid}</code></h4><p>Change information (medications, date and/or text) of a single journal entry. The current
user will need write access to the patient, write access to every medication tagged in the
old <code>medication_ids</code> <strong>and</strong> write access to every medication tagged in the newly-updated
<code>medication_ids</code>.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>journalid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the entry (<em>url</em>)</p>
</dd><dt>date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new ISO 8601 datetime to change the entry date to</p>
</dd><dt>medication_ids</dt><dd><code>array of integers</code>&nbsp;<span>(optional)</span>&nbsp;<p>Array of medication IDs. This will overwrite the previous list, so make sure to
list <em>all</em> medication IDs for the entry, not just new ones.</p>
</dd><dt>text</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>String to change the actual text of the entry to. Cannot be blank if present.</p>
</dd><dt>mood</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>mood of the patient as they wrote the journal entry</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an absolute amazeballs day today, omg I love Adderall so much it's the greatest thing ever."</span>,
    mood: <span class="hljs-string">"amazeballs"</span>,
    medication_ids: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_journal_id</code> (404) - a journal entry with that ID was not found</p>
</li>
<li>
<p><code>invalid_date</code> (400) - the date field specified is not in valid ISO 8601 format</p>
</li>
<li>
<p><code>text_required</code> (400) - if the text field is present, it cannot be blank</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - the medications list contains an invalid entry for which a corresponding medication cannot be found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an absolute amazeballs day today, omg I love Adderall so much it's the greatest thing ever."</span>,
    mood: <span class="hljs-string">"amazeballs"</span>,
    hashtags: [],
    medication_ids: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="journal-entries-journal-entry-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete an Entry</div><a href="#journal-entries-journal-entry-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/journal/{journalid}</code></h4><p>Remove a single journal entry. The current user will need write access to both the patient
and all medications tagged in <code>medication_ids</code>.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>journalid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the journal entry (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_journal_id</code> (404) - a journal entry with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    text: <span class="hljs-string">"Had an absolute amazeballs day today, omg I love Adderall so much it's the greatest thing ever."</span>,
    mood: <span class="hljs-string">"amazeballs"</span>,
    hashtags: [],
    medication_ids: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>]
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="doctors" class="resource-group"><h2 class="group-heading">Doctors<a href="#doctors" class="permalink">&para;</a></h2><p>Basic contact details for all of the doctors who’ve prescribed medication to
a specified patient.</p>
<div id="doctors-doctors-collection" class="resource"><h3 class="resource-heading">Doctors Collection<a href="#doctors-doctors-collection" class="permalink">&para;</a></h3><div id="doctors-doctors-collection-post" class="action post"><h4 class="action-heading"><div class="name">Create a Doctor</div><a href="#doctors-doctors-collection-post" class="method post">POST</a><code class="uri">/patients/{patientid}/doctors</code></h4><p>Store details of a new doctor for the specified patient (the current user will
need write access to the patient).</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>full name of the doctor</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>contact phone number for the doctor</p>
</dd><dt>address</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Postal address of the doctor. Newlines can optionally be used to split
lines.</p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>freeform text notes about the doctor by the patient</p>
</dd><dt>title</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>position of doctor</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Dr. X"</span>,
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
    notes: <span class="hljs-string">"Love this doc!"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>name_required</code> (400) - a name must be provided</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Dr. X"</span>,
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>
    notes: <span class="hljs-string">"Love this doc!"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="doctors-doctors-collection-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve all Doctors</div><a href="#doctors-doctors-collection-get" class="method get">GET</a><code class="uri">/patients/{patientid}/doctors</code></h4><p>Get a list of all the patient’s doctors. Includes full information on each. The
current user will need read access to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>name</code>, and defaults
to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by name of doctor. Performs fuzzy matching.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    doctors: [
        {
            id: <span class="hljs-number">1</span>,
            name: <span class="hljs-string">"Dr. X"</span>,
            phone: <span class="hljs-string">"(617) 617-6177"</span>,
            address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
            title: <span class="hljs-string">"Primary Care Physician"</span>,
            notes: <span class="hljs-string">"Love this doc!"</span>
        },
        ...
    ],
    count: <span class="hljs-number">3</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="doctors-doctor" class="resource"><h3 class="resource-heading">Doctor<a href="#doctors-doctor" class="permalink">&para;</a></h3><div id="doctors-doctor-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve a Doctor</div><a href="#doctors-doctor-get" class="method get">GET</a><code class="uri">/patients/{patientid}/doctors/{doctorid}</code></h4><p>View information on an individual doctor. The current user will need read access to the
patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>doctorid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the doctor</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_doctor_id</code> (404) - a doctor with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Dr. X"</span>,
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
    notes: <span class="hljs-string">"Love this doc!"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="doctors-doctor-put" class="action put"><h4 class="action-heading"><div class="name">Change a Doctor's Info</div><a href="#doctors-doctor-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/doctors/{doctorid}</code></h4><p>Change information (name, phone and/or address) of an individual doctor. The current user will need
write access to the patient data.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>doctorid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the doctor (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Full name of the doctor. Must not be blank.</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>contact phone number for the doctor</p>
</dd><dt>address</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>postal address, in the format specified above in <code>POST</code></p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>freeform text notes about the doctor by the patient</p>
</dd><dt>title</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>position of doctor</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Dr. Y"</span>,
    phone: <span class="hljs-string">"(716) 716-7166"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>,
    notes: <span class="hljs-string">"Love this doc the most!"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>name_required</code> (400) - a name must be provided</p>
</li>
<li>
<p><code>invalid_doctor_id</code> (404) - a doctor with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Dr. Y"</span>,
    phone: <span class="hljs-string">"(716) 716-7166"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>,
    notes: <span class="hljs-string">"Love this doc the most!"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="doctors-doctor-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete a Doctor</div><a href="#doctors-doctor-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/doctors/{doctorid}</code></h4><p>Remove information on a single doctor. The current user will need write access to the patient’s
data.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>doctorid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the doctor (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_doctor_id</code> (404) - a doctor with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Dr. X"</span>,
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
    notes: <span class="hljs-string">"Love this doc the most!"</span>,
    title: <span class="hljs-string">"Primary Care Physician"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="pharmacies" class="resource-group"><h2 class="group-heading">Pharmacies<a href="#pharmacies" class="permalink">&para;</a></h2><p>Details for all pharmacies from whom the selected patient receives medication.</p>
<p>The <code>address</code> field is geocoded into the <code>lat</code> and <code>lon</code> fields.</p>
<div id="pharmacies-pharmacies-collection" class="resource"><h3 class="resource-heading">Pharmacies Collection<a href="#pharmacies-pharmacies-collection" class="permalink">&para;</a></h3><div id="pharmacies-pharmacies-collection-post" class="action post"><h4 class="action-heading"><div class="name">Create a Pharmacy</div><a href="#pharmacies-pharmacies-collection-post" class="method post">POST</a><code class="uri">/patients/{patientid}/pharmacies</code></h4><p>Store details of a new pharmacy. The current user will need write access to the
patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>name of the pharmacy</p>
</dd><dt>address</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Postal address of the pharmacy. Newlines can optionally be used to split
lines.</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>contact phone number for the pharmacy</p>
</dd><dt>hours</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>The hours the pharmacy is open. Keys are full lowercase names of the days of
the week (e.g., <code>monday</code>), and values are themselves dictionaries of the form
<code>{open: OPEN_TIME, close: CLOSE_TIME}</code>, where times are formatted in the <code>HH:MM</code>
format specified in ISO 8601. These hours should be in the local timezone of
the patient.</p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>freeform text notes about the pharmacy by the patient</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Pharmacy X"</span>,
    address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    hours: {
        monday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        tuesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        wednesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        thursday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        friday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        saturday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        sunday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        }
    },
    notes: <span class="hljs-string">"Great pharmacy! Love the smell"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>name_required</code> (400) - a non-blank name must be provided</p>
</li>
<li>
<p><code>invalid_hours</code> (400) - the opening/closing hours dictionary is not in the
form specified above</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Pharmacy X"</span>,
    address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    hours: {
        monday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        tuesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        wednesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        thursday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        friday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        saturday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        sunday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        }
    },
    lat: <span class="hljs-number">50.9692224</span>,
    lon: <span class="hljs-number">0.0893951</span>,
    notes: <span class="hljs-string">"Great pharmacy! Love the smell"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="pharmacies-pharmacies-collection-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve all Pharmacies</div><a href="#pharmacies-pharmacies-collection-get" class="method get">GET</a><code class="uri">/patients/{patientid}/pharmacies</code></h4><p>Get a list of all the patient’s pharmacies. Includes full information on each… The current
user will need read access to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>name</code>, and defaults
to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by name of pharmacy. Performs fuzzy matching.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    pharmacies: [
        {
            id: <span class="hljs-number">1</span>,
            name: <span class="hljs-string">"Pharmacy X"</span>,
            ...
        },
        ...
    ],
    count: <span class="hljs-number">3</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="pharmacies-pharmacy" class="resource"><h3 class="resource-heading">Pharmacy<a href="#pharmacies-pharmacy" class="permalink">&para;</a></h3><div id="pharmacies-pharmacy-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve a Pharmacy</div><a href="#pharmacies-pharmacy-get" class="method get">GET</a><code class="uri">/patients/{patientid}/pharmacies/{pharmacyid}</code></h4><p>View information on an individual pharmacy. The current user will need read access
to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>pharmacyid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the pharmacy</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_pharmacy_id</code> (404) - a pharmacy with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Pharmacy X"</span>,
    address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>
    phone: <span class="hljs-string">"(617) 617-6177"</span>,
    hours: {
        monday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        tuesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        wednesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        thursday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        friday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        saturday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        sunday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        }
    },
    notes: <span class="hljs-string">"Great pharmacy! Love the smell"</span>,
    lat: <span class="hljs-number">50.9692224</span>,
    lon: <span class="hljs-number">0.0893951</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="pharmacies-pharmacy-put" class="action put"><h4 class="action-heading"><div class="name">Change a Pharmacy's Info</div><a href="#pharmacies-pharmacy-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/pharmacies/{pharmacyid}</code></h4><p>Change information (name, phone, address and/or hours) of an individual pharmacy. The
current user will need write access to the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient  (<em>url</em>)</p>
</dd><dt>pharmacyid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the pharmacy (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Name of the pharmacy. Must not be blank.</p>
</dd><dt>phone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>contact phone number for the pharmacy</p>
</dd><dt>address</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>postal address, in the format specified in <code>POST</code></p>
</dd><dt>hours</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>Opening/closing hours, in the format specified in <code>POST</code>. The dictionary can
be partially empty.</p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>freeform text notes about the pharmacy by the patient</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Pharmacy. Y"</span>,
    phone: <span class="hljs-string">"(716) 716-7166"</span>,
    address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>,
    hours: {
        tuesday: {
            open: <span class="hljs-string">"10:00"</span>
        }
    },
    notes: <span class="hljs-string">"Doesn't smell like it used to"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
</ul>
<ul>
<li><code>invalid_hours</code> (400) - the opening/closing hours dictionary is not in the
form specified above in <code>POST</code></li>
</ul>
<ul>
<li>
<p><code>invalid_pharmacy_id</code> (404) - a pharmacy with that ID was not found</p>
</li>
<li>
<p><code>name_required</code> (400) - the name cannot be changed to a blank name</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Pharmacy Y"</span>,
    address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>
    phone: <span class="hljs-string">"(716) 716-7166"</span>,
    hours: {
        monday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        tuesday: {
            open: <span class="hljs-string">"10:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        wednesday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        thursday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        friday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        saturday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        },
        sunday: {
            open: <span class="hljs-string">"09:00"</span>,
            close: <span class="hljs-string">"17:00"</span>
        }
    },
    notes: <span class="hljs-string">"Doesn't smell like it used to"</span>,
    lat: <span class="hljs-number">50.9692224</span>,
    lon: <span class="hljs-number">0.0893951</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="pharmacies-pharmacy-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete a Pharmacy</div><a href="#pharmacies-pharmacy-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/pharmacies/{pharmacyid}</code></h4><p>Remove information on a single pharmacy. The current user will need write access to
the patient.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient  (<em>url</em>)</p>
</dd><dt>pharmacyid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the pharmacy (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_pharmacy_id</code> (404) - a pharmacy with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Pharmacy X"</span>,
    ...,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="medications" class="resource-group"><h2 class="group-heading">Medications<a href="#medications" class="permalink">&para;</a></h2><p>Data on regular medications a patient takes (either manually entered
or retrieved via OAuth2 + FHIR from e.g., the DRE).</p>
<p>Medication data responses contain the <code>number_left</code> integer key: this is an estimation
of the number of pills left based on <code>fill_date</code> and dose events submitted to the API.
It will only be non-null if <code>fill_date</code> is non-null.</p>
<h3 id="header-permissions">Permissions <a class="permalink" href="#header-permissions" aria-hidden="true">¶</a></h3>
<p>Medications have custom permissions that are used instead of the patient-wide permissions.
Each medication has <code>access_anyone</code>, <code>access_family</code> and <code>access_prime</code> fields, each of which
can be set to <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code> to control the access the relevant share
group (<code>anyone</code>, <code>family</code> or <code>prime</code>) has to the medication.</p>
<p><code>read</code>, <code>write</code> and <code>none</code> are self-explanatory, but <code>default</code> is slightly more complex:</p>
<ul>
<li>
<p>For an <code>anyone</code> share, <code>default</code> gives the user read-only access</p>
</li>
<li>
<p>For a <code>family</code> share on an as-needed medication (including medications that are both regular and as-needed),
<code>default</code> gives the user write access.</p>
</li>
<li>
<p>For a <code>family</code> share on a medication that is not as-needed (so is regular-only), <code>default</code> gives the user
read-only access.</p>
</li>
<li>
<p>For a <code>prime</code> share, <code>default</code> delegates to the patient-level permissions: it first looks at any explicit
permissions specified in the share itself, and if that’s set to <code>default</code> then it looks as <code>access_prime</code> in
the patient data.</p>
</li>
</ul>
<p>There is one exception to this rule. The <em>user</em> who creates a medication is recorded as the <code>creator</code> of that
medication, and they always have write access to that medication (even if, for example, the patient is shared
with the user through the <code>anyone</code> group and the medication has <code>access_anyone=&quot;default&quot;</code> (which would usually give
them read-only access), that user will still have write access).</p>
<p>All three keys (<code>access_anyone</code>, <code>access_family</code> and <code>access_prime</code>) default to <code>default</code>, the recommended
permission structure.</p>
<h3 id="header-schedule">Schedule <a class="permalink" href="#header-schedule" aria-hidden="true">¶</a></h3>
<p>Various endpoints below take and output <code>schedule</code> data items, representing a regular
schedule the patient should take a certain medication on.  These are used to schedule
reminders, and so are vitally important for the core of the app. The data format
<code>schedule</code>s must be in is precisely defined below, and must be followed exactly.</p>
<p>At it’s core, each schedule is an object.</p>
<p>It must contain the <code>as_needed</code> boolean key signifying whether the medication can be
taken whenever needed (irregularly), and the <code>regularly</code> key signifying it should be
taken on a regular schedule. At least one must be true. If <code>regularly</code> is <code>false</code>, no
extra information is needed. If <code>regularly</code> is true, all of the following scheduling
data is also required.</p>
<p>The schedule must have an <code>until</code> key signifying when the patient should stop taking
the medication:</p>
<ul>
<li>In Perpetuity (forever)</li>
</ul>
<pre><code class="language-javascript">until: {
    type: <span class="hljs-string">"forever"</span>
}</code></pre>
<ul>
<li>A certain number of times before stopping</li>
</ul>
<pre><code class="language-javascript">until: {
    type: <span class="hljs-string">"number"</span>,
    stop: <span class="hljs-number">5</span>
}</code></pre>
<ul>
<li>Until a certain date</li>
</ul>
<pre><code class="language-javascript">until: {
    type: <span class="hljs-string">"date"</span>,
    stop: <span class="hljs-string">"2015-05-07"</span>
}</code></pre>
<p>The schedule must have a <code>frequency</code> key signifying on which days the patient should take
the medication. Specific times of each day can be set using the <code>times</code> key, which is described
below. <code>frequency</code> is an object consisting of an <code>n</code> key and a <code>unit</code> key: <code>n</code> is a number
representing that the medication should be taken every <code>n</code> units, and <code>unit</code> specifies that
unit (it can be <code>&quot;day&quot;</code>, <code>&quot;month&quot;</code> or <code>&quot;year&quot;</code> only).</p>
<p><code>frequency</code> can also have an optional <code>exclude</code> key, denoting that the medication should
sometimes be skipped. If present, <code>exclude</code> must be an object consisting of <code>exclude</code> and <code>repeat</code>
keys. <code>exclude</code> is an array of numbers representing the indices of days that must be swapped
(where the first day it should be taken on has index 0, the second day it <em>should be taken on</em>
has index 1, etc). <code>repeat</code> is a number representing the length of the exclude cycle: in other
words, indices are taken modulo this. See the examples below for illustration.</p>
<ul>
<li>Daily</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">1</span>,
    unit: <span class="hljs-string">"day"</span>
}</code></pre>
<ul>
<li>Weekdays only</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">1</span>,
    unit: <span class="hljs-string">"day"</span>,
    exclude: {
        exclude: [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
        repeat: <span class="hljs-number">7</span>
    }
}</code></pre>
<ul>
<li>Weekly</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">7</span>,
    unit: <span class="hljs-string">"day"</span>
}</code></pre>
<ul>
<li>Every 28 days</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">28</span>,
    unit: <span class="hljs-string">"day"</span>
}</code></pre>
<ul>
<li>Monthly</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">1</span>,
    unit: <span class="hljs-string">"month"</span>
}</code></pre>
<ul>
<li>Quarterly</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">3</span>,
    unit: <span class="hljs-string">"month"</span>
}</code></pre>
<ul>
<li>Quarterly apart from last quarter</li>
</ul>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">3</span>,
    unit: <span class="hljs-string">"month"</span>,
    exclude: {
        exclude: [<span class="hljs-number">3</span>],
        repeat: <span class="hljs-number">4</span>
    }
}</code></pre>
<p><code>frequency</code> can also include a <code>start</code> key: a <code>YYYY-MM-DD</code> formatted (local) date representing
any date that the medication was taken on (for example, the date the medication was started on).
This means that, for example, Orange knows which day of the week a weekly medication is taken on.
<code>start</code> can either be a string or an array of strings.</p>
<p>For example, a <code>start</code> array can be used to represent a medication that should be taken on the 1st
and the 15th of every month</p>
<pre><code class="language-javascript">frequency: {
    n: <span class="hljs-number">1</span>,
    unit: <span class="hljs-string">"month"</span>,
    start: [
        <span class="hljs-string">"2015-01-01"</span>,
        <span class="hljs-string">"2015-01-15"</span>
    ]
}</code></pre>
<p>The schedule must also include a <code>times</code> key representing the times of the day the medication
is taken on (i.e., <code>frequency</code> dictates which days and <code>times</code> dictates which times on those days).
The number of times the medication is taken each day should not be explicitly specified, this is instead
calculated from the length of <code>times</code>. <code>times</code> should be an array consisting of objects, each representing
a time of the day at which the medication should be taken. There are 3 different types:</p>
<ul>
<li>Any time of the day</li>
</ul>
<pre><code class="language-javascript">{
    type: <span class="hljs-string">"unspecified"</span>
}</code></pre>
<ul>
<li>An exact time (<code>time</code> should be formatted <code>HH:MM a</code> in local time)</li>
</ul>
<pre><code class="language-javascript">{
    type: <span class="hljs-string">"exact"</span>,
    time: <span class="hljs-string">"09:00 am"</span>
}</code></pre>
<ul>
<li>A time based on the user’s habits. <code>event</code> can be either <code>&quot;breakfast&quot;</code>, <code>&quot;lunch&quot;</code>, <code>&quot;dinner&quot;</code> or <code>&quot;sleep&quot;</code>. <code>when</code> can be either <code>&quot;before&quot;</code> or <code>&quot;after&quot;</code>.</li>
</ul>
<pre><code class="language-javascript">{
    type: <span class="hljs-string">"event"</span>,
    event: <span class="hljs-string">"lunch"</span>,
    when: <span class="hljs-string">"before"</span>
}</code></pre>
<p>When sent to the API, each <code>time</code> will be given an ID that will be returned in all endpoints returning
the medication schedule. These IDs can be used in the <code>/medications/:medicationid/times/:timeid</code> endpoint
to set notification settings on a user-specific basis for that specific time in that specific medication
schedule.</p>
<p>The schedule must also include a <code>take_with_food</code> key. This is a boolean specifying whether
or not the medication must be taken with food. <code>true</code> means it must be taken with food, <code>false</code> means
it must not be taken with food, and <code>null</code> means it does not matter. Note that <code>false</code> means
the medication <strong>must not</strong> be taken with food, not that it just doesn’t matter. So if unknown,
<code>take_with_food</code> should be <code>null</code>.</p>
<p>Finally the schedule must include <code>take_with_medications</code> and <code>take_without_medications</code> keys. These
should be arrays of integers that are the IDs of medications with which this medication must (or must not)
be taken simultaneously with. If there are no medications like this, they should both be <code>[]</code>.</p>
<p>Note that each medication object is also returned from the API with <code>schedule_summary</code> string field,
containing human-readable text representing the schedule the medication should be taken on (e.g,.
<code>&quot;Daily until 7/30/15&quot;</code>). <code>schedule_summary</code> will not denote whether the medication is as-needed unless it is
as-needed only, in which case it will say <code>&quot;As needed only&quot;</code>.</p>
<div id="medications-medications-collection" class="resource"><h3 class="resource-heading">Medications Collection<a href="#medications-medications-collection" class="permalink">&para;</a></h3><div id="medications-medications-collection-post" class="action post"><h4 class="action-heading"><div class="name">Create a new Medication</div><a href="#medications-medications-collection-post" class="method post">POST</a><code class="uri">/patients/{patientid}/medications</code></h4><p>Store details of a new medication the patient has started taking. The current user
must have write access to the patient.</p>
<p>If <code>origin=&quot;imported&quot;</code> and <code>import_id</code> is set, then the API will look for an existing
medication with the same <code>import_id</code>. If one exists then it will be updated with the specified
details, rather than a new medication created. This can be used to merge medication details when
running an import process in the app multiple times.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>human-formatted name of the medication</p>
</dd><dt>rx_norm</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>rxNorm ID code for the medication</p>
</dd><dt>ndc</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>NDC ID code for the medication</p>
</dd><dt>dose</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>Dose of medication the patient should take. Formatted as
<code>{quantity: QUANTITY, unit: UNIT}</code> where <code>QUANTITY</code> is numeric
and <code>UNIT</code> is a string (e.g., <code>&quot;mg&quot;</code>)</p>
</dd><dt>route</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>ROA of medication</p>
</dd><dt>form</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<span class="text-muted example"><strong>Example:&nbsp;</strong><span>pill</span></span></dd><dt>rx_number</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>RX control number of the prescription</p>
</dd><dt>fill_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>ISO 8601 YYYY-MM-DD in local time of the last date the medication was filled</p>
</dd><dt>quantity</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>number of medication in each ‘pack’</p>
</dd><dt>type</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>legal medication type: e.g., <code>&quot;OTC&quot;</code></p>
</dd><dt>brand</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>brand name of medication</p>
</dd><dt>origin</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Optional string containing the source the medication data came from. Suggested use
case would be to store either <code>&quot;manual&quot;</code> or <code>&quot;imported&quot;</code> in this field for each
medication, although note that no backend API validation is done of this field so any
string value can be set.</p>
</dd><dt>import_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Optional integer representing a unique ID for an imported medication in the imported data
source (for example, the <code>id</code> field in the DRE/another FHIR API). If a medication with
the same <code>import_id</code> value already exists, and <code>origin=&quot;imported&quot;</code>, then the existing
medication will be updated with the new info, rather than a new medication created.</p>
</dd><dt>schedule</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>a schedule datum in the form described above</p>
</dd><dt>access_prime</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>prime</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>access_family</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>family</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>access_anyone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>anyone</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>doctor_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>ID of the doctor prescribing the patient’s medication. This doctor
must already exist in <code>/patients/:patientid/doctors</code></p>
</dd><dt>pharmacy_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>ID of the pharmacy selling the patient’s medication. This doctor
must already exist in <code>/patients/:patientid/doctors</code></p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Loratadine"</span>,
    rx_norm: <span class="hljs-string">"324026"</span>,
    ndc: <span class="hljs-string">"33261-0228"</span>,
    dose: {
        quantity: <span class="hljs-number">100</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">false</span>,
        regularly: <span class="hljs-literal">true</span>,
        until: { type: <span class="hljs-string">"forever"</span> },
        frequency: { n: <span class="hljs-number">1</span>, unit: <span class="hljs-string">"day"</span> },
        times: [
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"before"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"after"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"before"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"after"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"before"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"after"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"before"</span> },
            { type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"after"</span> },
            { type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"09:00"</span> },
            { type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"21:30"</span> },
            { type: <span class="hljs-string">"unspecified"</span> }
        ],
        take_with_food: <span class="hljs-literal">null</span>,
        take_with_medications: [],
        take_without_medications: []
    },
    access_anyone: <span class="hljs-string">"default"</span>,
    access_family: <span class="hljs-string">"default"</span>,
    access_prime: <span class="hljs-string">"default"</span>,
    doctor_id: <span class="hljs-number">1</span>,
    pharmacy_id: <span class="hljs-number">1</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>name_required</code> (400) - medication must have a non-blank name</p>
</li>
<li>
<p><code>invalid_dose</code> (400) - medication dose specified in the format specified above</p>
</li>
<li>
<p><code>invalid_quantity</code> (400) - quantity not a positive integer</p>
</li>
<li>
<p><code>invalid_fill_date</code> (400) - fill date is not a YYYY-MM-DD date</p>
</li>
<li>
<p><code>invalid_schedule</code> (400) - schedule is not specified in the format specified above</p>
</li>
<li>
<p><code>invalid_access_anyone</code> (400) - the <code>access_anyone</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_access_family</code> (400) - the <code>access_family</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_access_prime</code> (400) - the <code>access_prime</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_doctor_id</code> (400) - a doctor with that ID was not found</p>
</li>
<li>
<p><code>invalid_pharmacy_id</code> (400) - a pharmacy with that ID was not found</p>
</li>
<li>
<p><code>invalid_import_id</code> (400) - the <code>import_id</code> value was invalid (must be <code>undefined</code>, <code>null</code> or an integer)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Loratadine"</span>,
    rx_norm: <span class="hljs-string">"324026"</span>,
    ndc: <span class="hljs-string">"33261-0228"</span>,
    dose: {
        quantity: <span class="hljs-number">100</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    number_left: <span class="hljs-number">17</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">false</span>,
        regularly: <span class="hljs-literal">true</span>,
        until: { type: <span class="hljs-string">"forever"</span> },
        frequency: { n: <span class="hljs-number">1</span>, unit: <span class="hljs-string">"day"</span> },
        times: [
            { id: <span class="hljs-number">1</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">2</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">3</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">4</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">5</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">6</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">7</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">8</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">9</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"09:00"</span> },
            { id: <span class="hljs-number">10</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"21:30"</span> },
            { id: <span class="hljs-number">11</span>, type: <span class="hljs-string">"unspecified"</span> }
        ],
        take_with_food: <span class="hljs-literal">null</span>,
        take_with_medications: [],
        take_without_medications: []
    },
    schedule_summary: <span class="hljs-string">"Daily"</span>,
    access_anyone: <span class="hljs-string">"default"</span>,
    access_family: <span class="hljs-string">"default"</span>,
    access_prime: <span class="hljs-string">"default"</span>,
    doctor_id: <span class="hljs-number">1</span>,
    pharmacy_id: <span class="hljs-number">1</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="medications-medications-collection-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve all Medications</div><a href="#medications-medications-collection-get" class="method get">GET</a><code class="uri">/patients/{patientid}/medications</code></h4><p>Get a list of all the patient’s medications. Includes full information on each, but
doctor and pharmacy details are not expanded out. To get a successful response from
this endpoint, the current user must have read access to the patient. Further, only
medications for which the current user has read access will be returned.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>name</code>, and defaults to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Filter results by name of medication. Performs fuzzy matching.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    medications: [
        {
            id: <span class="hljs-number">1</span>,
            name: <span class="hljs-string">"Loratadine"</span>,
            rx_norm: <span class="hljs-string">"324026"</span>,
            ndc: <span class="hljs-string">"33261-0228"</span>,
            dose: {
                quantity: <span class="hljs-number">100</span>,
                unit: <span class="hljs-string">"mg"</span>
            },
            route: <span class="hljs-string">"oral"</span>,
            form: <span class="hljs-string">"pill"</span>,
            rx_number: <span class="hljs-string">"123456789"</span>,
            fill_date: <span class="hljs-string">"2015-05-01"</span>,
            number_left: <span class="hljs-number">17</span>,
            quantity: <span class="hljs-number">50</span>,
            type: <span class="hljs-string">"OTC"</span>,
            brand: <span class="hljs-string">"Claritin"</span>,
            origin: <span class="hljs-string">"manual"</span>,
            schedule: {
                as_needed: <span class="hljs-literal">false</span>,
                regularly: <span class="hljs-literal">true</span>,
                until: { type: <span class="hljs-string">"forever"</span> },
                frequency: { n: <span class="hljs-number">1</span>, unit: <span class="hljs-string">"day"</span> },
                times: [
                    { id: <span class="hljs-number">1</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"before"</span> },
                    { id: <span class="hljs-number">2</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"after"</span> },
                    { id: <span class="hljs-number">3</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"before"</span> },
                    { id: <span class="hljs-number">4</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"after"</span> },
                    { id: <span class="hljs-number">5</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"before"</span> },
                    { id: <span class="hljs-number">6</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"after"</span> },
                    { id: <span class="hljs-number">7</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"before"</span> },
                    { id: <span class="hljs-number">8</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"after"</span> },
                    { id: <span class="hljs-number">9</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"09:00"</span> },
                    { id: <span class="hljs-number">10</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"21:30"</span> },
                    { id: <span class="hljs-number">11</span>, type: <span class="hljs-string">"unspecified"</span> }
                ],
                take_with_food: <span class="hljs-literal">null</span>,
                take_with_medications: [],
                take_without_medications: []
            },
            schedule_summary: <span class="hljs-string">"Daily"</span>,
            access_anyone: <span class="hljs-string">"default"</span>,
            access_family: <span class="hljs-string">"default"</span>,
            access_prime: <span class="hljs-string">"default"</span>,
            doctor_id: <span class="hljs-number">1</span>,
            pharmacy_id: <span class="hljs-number">1</span>
        },
        ...
    ],
    count: <span class="hljs-number">7</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="medications-medication" class="resource"><h3 class="resource-heading">Medication<a href="#medications-medication" class="permalink">&para;</a></h3><div id="medications-medication-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve a Medication</div><a href="#medications-medication-get" class="method get">GET</a><code class="uri">/patients/{patientid}/medications/{medicationid}</code></h4><p>View information on an individual medication. Doctor and pharmacy details are expanded out.
The current user must have read access to <strong>both</strong> the patient and the medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>medicationid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_medication_id</code> (404) - a medication with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Loratadine"</span>,
    rx_norm: <span class="hljs-string">"324026"</span>,
    ndc: <span class="hljs-string">"33261-0228"</span>,
    dose: {
        quantity: <span class="hljs-number">100</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    number_left: <span class="hljs-number">17</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">false</span>,
        regularly: <span class="hljs-literal">true</span>,
        until: { type: <span class="hljs-string">"forever"</span> },
        frequency: { n: <span class="hljs-number">1</span>, unit: <span class="hljs-string">"day"</span> },
        times: [
            { id: <span class="hljs-number">1</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">2</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">3</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">4</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">5</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">6</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">7</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">8</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">9</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"09:00"</span> },
            { id: <span class="hljs-number">10</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"21:30"</span> },
            { id: <span class="hljs-number">11</span>, type: <span class="hljs-string">"unspecified"</span> }
        ],
        take_with_food: <span class="hljs-literal">null</span>,
        take_with_medications: [],
        take_without_medications: []
    },
    schedule_summary: <span class="hljs-string">"Daily"</span>,
    access_anyone: <span class="hljs-string">"default"</span>,
    access_family: <span class="hljs-string">"default"</span>,
    access_prime: <span class="hljs-string">"default"</span>,
    doctor: {
        id: <span class="hljs-number">1</span>,
        name: <span class="hljs-string">"Dr. Y"</span>,
        phone: <span class="hljs-string">"(716) 716-7166"</span>,
        address: <span class="hljs-string">"Doctor Street, DC, 20052"</span>,
        notes: <span class="hljs-string">"Love this doc the most!"</span>,
        success: <span class="hljs-literal">true</span>
    },
    pharmacy: {
        name: <span class="hljs-string">"Pharmacy X"</span>,
        address: <span class="hljs-string">"Pharmacy Street, DC, 20052"</span>
        phone: <span class="hljs-string">"(617) 617-6177"</span>,
        hours: {
            monday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            tuesday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            wednesday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            thursday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            friday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            saturday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            sunday: {
                open: <span class="hljs-string">"0900"</span>,
                close: <span class="hljs-string">"1700"</span>
            },
            notes: <span class="hljs-string">"Great pharmacy! Love the smell"</span>
        }
    },
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="medications-medication-put" class="action put"><h4 class="action-heading"><div class="name">Change a Med's Info</div><a href="#medications-medication-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/medications/{medicationid}</code></h4><p>Change information (all keys apart from <code>id</code>) of an individual medication. The current
user must have read access to the patient and write access to the medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>medicationid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication (<em>url</em>)</p>
</dd><dt>name</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>human-formatted name of the medication</p>
</dd><dt>rx_norm</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>rxNorm ID code for the medication</p>
</dd><dt>ndc</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>NDC ID code for the medication</p>
</dd><dt>dose</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>As in <code>POST</code>. A whole new dictionary must be sent.</p>
</dd><dt>route</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>ROA of medication</p>
</dd><dt>form</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<span class="text-muted example"><strong>Example:&nbsp;</strong><span>pill</span></span></dd><dt>rx_number</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>RX control number of the prescription</p>
</dd><dt>fill_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>ISO 8601 YYYY-MM-DD in local time of the last date the medication was filled</p>
</dd><dt>quantity</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>number of medication in each ‘pack’</p>
</dd><dt>type</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>legal medication type: e.g., <code>&quot;OTC&quot;</code></p>
</dd><dt>brand</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>brand name of medication</p>
</dd><dt>origin</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Place the data for this medication came from (suggested use case: store either <code>&quot;manual&quot;</code>
or <code>&quot;imported&quot;</code> in this field, although the API does no validation of the string contents)</p>
</dd><dt>import_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>The original ID of the medication in the data source it was imported from. Updating <code>import_id</code>
here will not cause any merges, but when new medications are created at the <code>POST</code> endpoint they
will compare to the updated <code>import_id</code> value.</p>
</dd><dt>schedule</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>As in <code>POST</code>. A whole new schedule must be sent.</p>
</dd><dt>access_prime</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>prime</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>access_family</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>family</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>access_anyone</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The access permissions users in the <code>anyone</code> group should have to this medication,
overriding the patient-wide permissions. Must be either <code>read</code>, <code>write</code>, <code>none</code>
or <code>default</code>. Defaults to <code>default</code>.</p>
</dd><dt>doctor_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>ID of the doctor prescribing the patient’s medication</p>
</dd><dt>pharmacy_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>ID of the pharmacy selling the patient’s medication</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    name: <span class="hljs-string">"Fexofenadine"</span>,
    rx_norm: <span class="hljs-string">"12345"</span>,
    ndc: <span class="hljs-string">"1234-6789"</span>,
    dose: {
        quantity: <span class="hljs-number">120</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">true</span>,
        regularly: <span class="hljs-literal">false</span>
    },
    access_anyone: <span class="hljs-string">"write"</span>,
    access_family: <span class="hljs-string">"write"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    doctor_id: <span class="hljs-number">1</span>,
    pharmacy_id: <span class="hljs-number">1</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>name_required</code> (400) - medication must have a non-blank name</p>
</li>
<li>
<p><code>invalid_dose</code> (400) - medication dose specified in the format specified above</p>
</li>
<li>
<p><code>invalid_quantity</code> (400) - quantity not a positive integer</p>
</li>
<li>
<p><code>invalid_fill_date</code> (400) - fill date is not a YYYY-MM-DD date</p>
</li>
<li>
<p><code>invalid_schedule</code> (400) - schedule is not specified in the format specified above</p>
</li>
<li>
<p><code>invalid_access_anyone</code> (400) - the <code>access_anyone</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_access_family</code> (400) - the <code>access_family</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_access_prime</code> (400) - the <code>access_prime</code> field, if passed, must be either <code>read</code>, <code>write</code>, <code>default</code> or <code>none</code></p>
</li>
<li>
<p><code>invalid_doctor_id</code> (400) - a doctor with that ID was not found</p>
</li>
<li>
<p><code>invalid_pharmacy_id</code> (400) - a pharmacy with that ID was not found</p>
</li>
<li>
<p><code>invalid_import_id</code> (400) - the <code>import_id</code> value was invalid (must be <code>undefined</code>, <code>null</code> or an integer)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Fexofenadine"</span>,
    rx_norm: <span class="hljs-string">"12345"</span>,
    ndc: <span class="hljs-string">"1234-6789"</span>,
    dose: {
        quantity: <span class="hljs-number">120</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    number_left: <span class="hljs-number">17</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">true</span>,
        regularly: <span class="hljs-literal">false</span>
    },
    access_anyone: <span class="hljs-string">"write"</span>,
    access_family: <span class="hljs-string">"write"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    doctor_id: <span class="hljs-number">1</span>,
    pharmacy_id: <span class="hljs-number">1</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="medications-medication-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete a Medication</div><a href="#medications-medication-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/medications/{medicationid}</code></h4><p>Remove a single medication. The current user must have read access to the patient and
write access to the medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>medicationid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_medication_id</code> (404) - a medication with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">"Loratadine"</span>,
    rx_norm: <span class="hljs-string">"324026"</span>,
    ndc: <span class="hljs-string">"33261-0228"</span>,
    dose: {
        quantity: <span class="hljs-number">100</span>,
        unit: <span class="hljs-string">"mg"</span>
    },
    route: <span class="hljs-string">"oral"</span>,
    form: <span class="hljs-string">"pill"</span>,
    rx_number: <span class="hljs-string">"123456789"</span>,
    fill_date: <span class="hljs-string">"2015-05-01"</span>,
    number_left: <span class="hljs-number">17</span>,
    quantity: <span class="hljs-number">50</span>,
    type: <span class="hljs-string">"OTC"</span>,
    brand: <span class="hljs-string">"Claritin"</span>,
    origin: <span class="hljs-string">"manual"</span>,
    schedule: {
        as_needed: <span class="hljs-literal">false</span>,
        regularly: <span class="hljs-literal">true</span>,
        until: { type: <span class="hljs-string">"forever"</span> },
        frequency: { n: <span class="hljs-number">1</span>, unit: <span class="hljs-string">"day"</span> },
        times: [
            { id: <span class="hljs-number">1</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">2</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"breakfast"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">3</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">4</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"lunch"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">5</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">6</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"dinner"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">7</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"before"</span> },
            { id: <span class="hljs-number">8</span>, type: <span class="hljs-string">"event"</span>, event: <span class="hljs-string">"sleep"</span>, when: <span class="hljs-string">"after"</span> },
            { id: <span class="hljs-number">9</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"09:00"</span> },
            { id: <span class="hljs-number">10</span>, type: <span class="hljs-string">"exact"</span>, time: <span class="hljs-string">"21:30"</span> },
            { id: <span class="hljs-number">11</span>, type: <span class="hljs-string">"unspecified"</span> }
        ],
        take_with_food: <span class="hljs-literal">null</span>,
        take_with_medications: [],
        take_without_medications: []
    },
    schedule_summary: <span class="hljs-string">"Daily"</span>,
    access_anyone: <span class="hljs-string">"write"</span>,
    access_family: <span class="hljs-string">"write"</span>,
    access_prime: <span class="hljs-string">"write"</span>,
    doctor_id: <span class="hljs-number">1</span>,
    pharmacy_id: <span class="hljs-number">1</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="medications-medication-time" class="resource"><h3 class="resource-heading">Medication Time<a href="#medications-medication-time" class="permalink">&para;</a></h3><p>This endpoint represents a single ‘abstract’ time at which the schedule indicates a medication
should be taken: i.e., one item in the <code>times</code> array of a medication. This endpoint should be
used to both view and set the notification settings for this specific medication time, both at a
a default user-wide level (the <code>default</code> key) and specifically for this <em>user</em> (<strong>not</strong> patient)
(the <code>user</code> key).</p>
<p>Both keys represent an ‘offset’: the number of minutes before the medication should be scheduled
at which the user should be notified they need to take the med. For example, if <code>user = 5</code> and
<code>default = 30</code> then the current user will get a notification 5 minutes before the med should be taken,
and all other users (unless they have set their own notification settings) will get a notification
30 minutes before. Values will default to 30 minutes before.</p>
<p>The user key can be the string <code>default</code> to represent that that user has not set a custom offset
and the default should be respected.</p>
<div id="medications-medication-time-get" class="action get"><h4 class="action-heading"><div class="name">View Notification Settings</div><a href="#medications-medication-time-get" class="method get">GET</a><code class="uri">/patients/{patientid}/medications/{medicationid}/times/{timeid}</code></h4><p>View the current notification settings for the current user and the global user-wide default</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>medicationid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication</p>
</dd><dt>timeid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication time</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_medication_id</code> (404) - a medication with that ID was not found</p>
</li>
<li>
<p><code>invalid_time_id</code> (404) - a time with that ID was not found for that medication</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    <span class="hljs-keyword">default</span>: <span class="hljs-number">30</span>,
    user: <span class="hljs-string">"default"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="medications-medication-time-put" class="action put"><h4 class="action-heading"><div class="name">Set Notification Settings</div><a href="#medications-medication-time-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/medications/{medicationid}/times/{timeid}</code></h4><p>Set the current notification settings for the current user and the global user-wide default</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (*url)</p>
</dd><dt>medicationid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication (*url)</p>
</dd><dt>timeid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication time (*url)</p>
</dd><dt>default</dt><dd><code>number</code>&nbsp;<span>(optional)</span>&nbsp;<p>number of minutes to change the notification offset to for all users who haven’t set
a custom value</p>
</dd><dt>user</dt><dd><code>number or string</code>&nbsp;<span>(optional)</span>&nbsp;<p>number of minutes to change the notification offset to for this user, or <code>&quot;default&quot;</code>
to indicate that the default value should be used</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-keyword">default</span>: <span class="hljs-number">20</span>,
    user: <span class="hljs-number">15</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_medication_id</code> (404) - a medication with that ID was not found</p>
</li>
<li>
<p><code>invalid_time_id</code> (404) - a time with that ID was not found for that medication</p>
</li>
<li>
<p><code>invalid_default</code> (400) - invalid <code>default</code> value (must be a positive number)</p>
</li>
<li>
<p><code>invalid_user</code> (400) - invalid <code>user</code> value (must be a positive number or <code>&quot;default&quot;</code>)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    <span class="hljs-keyword">default</span>: <span class="hljs-number">20</span>,
    user: <span class="hljs-number">15</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="dose-events" class="resource-group"><h2 class="group-heading">Dose Events<a href="#dose-events" class="permalink">&para;</a></h2><p>A dose event is when the patient takes their medication (either when they’re
supposed to, <em>adhering</em>, or not, <em>non-adhering</em>) or skips their medication.</p>
<div id="dose-events-dose-events-collection" class="resource"><h3 class="resource-heading">Dose Events Collection<a href="#dose-events-dose-events-collection" class="permalink">&para;</a></h3><div id="dose-events-dose-events-collection-post" class="action post"><h4 class="action-heading"><div class="name">Create an Event</div><a href="#dose-events-dose-events-collection-post" class="method post">POST</a><code class="uri">/patients/{patientid}/doses</code></h4><p>Store details of a new dose event (e.g., when a patient signifies they’ve
taken their medication or skipped it). The current user will need write access to
<strong>both</strong> the patient and the medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>medication_id</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the medication for which the patient has adhered</p>
</dd><dt>date</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<span class="text-muted example"><strong>Example:&nbsp;</strong><span>2015-05-31T19:27:09+00:00</span></span></dd><dt>dose</dt><dd><code>dictionary</code>&nbsp;<span>(optional)</span>&nbsp;<p>Dose of medication the patient should take. Formatted as
<code>{quantity: QUANTITY, unit: UNIT}</code> where <code>QUANTITY</code> is numeric
and <code>UNIT</code> is a string (e.g., <code>&quot;mg&quot;</code>)</p>
<p>ISO 8601 combined date-time in UTC representing the date and time at which
<em>the patient took the medication</em></p>
</dd><dt>taken</dt><dd><code>boolean</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Boolean representing whether the user took their medication (i.e., <code>true</code> if
they took it, <code>false</code> if this dose event represents them <em>skipping</em> their
medication)</p>
</dd><dt>scheduled</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Integer representing the ID of a schedule event corresponding to the patient taking their medication.
These are the same IDs used to set notification settings at the
<code>/patients/{patientid}/medications/{medicationid}/times/{timeid}</code> endpoints. If this is not set for a
dose, the matcher will assume the medication was taken for an <code>unspecified</code> schedule event or was
taken out of schedule (as would be the case normally with an <code>as_needed</code> medication).</p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>free-text field for things such as observations and reactions recorded by the patient</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    medication_id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    notes: <span class="hljs-string">"Feeling sleepy now!"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>invalid_date</code> (400) - the date field specified is not in valid ISO 8601 format</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - no medication with the specified ID can be found</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>taken_required</code> (400) - a value is not specified (it should be a boolean) for <code>taken</code></p>
</li>
<li>
<p><code>invalid_taken</code> (400) - <code>taken</code> is not a valid boolean</p>
</li>
<li>
<p><code>invalid_scheduled</code> (400)</p>
<p><code>scheduled</code> is not a valid integer corresponding to an event with that ID in the schedule
for the medication (with ID <code>medication_id</code>)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    medication_id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    notes: <span class="hljs-string">"Feeling sleepy now!"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="dose-events-dose-events-collection-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve all Doses</div><a href="#dose-events-dose-events-collection-get" class="method get">GET</a><code class="uri">/patients/{patientid}/doses</code></h4><p>Get a list of all dose events for the patient. Includes full information on each,
but <code>medication_id</code> is not expanded out into <code>medication</code>. To get a successful
response from this endpoint, the user will need read access to the patient.
Further, only dose events for which the user has read access to the medication
will be shown.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>limit</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Maximum number of results to return. Defaults to 25.</p>
</dd><dt>offset</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number of initial results to ignore (used in combination with <code>limit</code>)
for pagination. Defaults to 0.</p>
</dd><dt>sort_by</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Field to sort results by. Must by either <code>id</code> or <code>date</code>, and defaults
to <code>id</code>.</p>
</dd><dt>sort_order</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>The order to sort results by: either <code>asc</code> or <code>desc</code>. Defaults to
<code>asc</code>.</p>
</dd><dt>start_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to events that took place after this date. Must be
a valid ISO 8601 datetime. Defaults to 0.</p>
</dd><dt>end_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to events that took place before this date. Must be
a valid ISO 8601 datetime. Defaults to infinity.</p>
</dd><dt>medication_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restrict results to events for this medication. Must correspond to a medication
owned by the current patient. Defaults to not filtering by medication.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_limit</code> (400) - the specified result limit is invalid</p>
</li>
<li>
<p><code>invalid_offset</code> (400) - the specified result offset is invalid</p>
</li>
<li>
<p><code>invalid_sort_by</code> (400) - the specified sort field is invalid</p>
</li>
<li>
<p><code>invalid_sort_order</code> (400) - the specified sort order is invalid</p>
</li>
<li>
<p><code>invalid_start_date</code> (400) - the specified start date is an invalid ISO 8601 datetime</p>
</li>
<li>
<p><code>invalid_end_date</code> (400) - the specified end date is an invalid ISO 8601 datetime</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - the medication ID specified to sort by is invalid</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    doses: [
        {
            id: <span class="hljs-number">1</span>,
            medication_id: <span class="hljs-number">1</span>,
            date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
            taken: <span class="hljs-literal">true</span>,
            scheduled: <span class="hljs-number">3</span>,
            notes: <span class="hljs-string">"Feeling sleepy now!"</span>
        },
        ...
    ],
    count: <span class="hljs-number">46</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="dose-events-dose-event" class="resource"><h3 class="resource-heading">Dose Event<a href="#dose-events-dose-event" class="permalink">&para;</a></h3><div id="dose-events-dose-event-get" class="action get"><h4 class="action-heading"><div class="name">Retrieve One Event</div><a href="#dose-events-dose-event-get" class="method get">GET</a><code class="uri">/patients/{patientid}/doses/{doseid}</code></h4><p>View information on an individual dose event. <code>medication_id</code> is helpfully
expanded out into <code>medication</code>. The current user will need read access to <strong>both</strong>
the patient and the dose event.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>doseid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the dose</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_dose_id</code> (404) - a dose with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    notes: <span class="hljs-string">"Feeling sleepy now!"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    medication: {
        id: <span class="hljs-number">1</span>,
        name: <span class="hljs-string">"Loratadine"</span>,
        rx_norm: <span class="hljs-string">"324026"</span>,
        ndc: <span class="hljs-string">"33261-0228"</span>,
        dose: {
            quantity: <span class="hljs-number">100</span>,
            unit: <span class="hljs-string">"mg"</span>
        },
        route: <span class="hljs-string">"oral"</span>,
        form: <span class="hljs-string">"pill"</span>,
        rx_number: <span class="hljs-string">"123456789"</span>,
        quantity: <span class="hljs-number">50</span>,
        type: <span class="hljs-string">"OTC"</span>,
        schedule: {
            ...
        },
        doctor_id: <span class="hljs-number">1</span>,
        pharmacy_id: <span class="hljs-number">1</span>,
        success: <span class="hljs-literal">true</span>
    },
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="dose-events-dose-event-put" class="action put"><h4 class="action-heading"><div class="name">Change an Event</div><a href="#dose-events-dose-event-put" class="method put">PUT</a><code class="uri">/patients/{patientid}/doses/{doseid}</code></h4><p>Change information (medication, date and/or notes) of a single dose event. The current
user will need write access to the patient, the old medication, and the new medication
(if different).</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>doseid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the dose (<em>url</em>)</p>
</dd><dt>medication_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>ID of a medication to change the dose to. Must correspond to an existing
medication.</p>
</dd><dt>date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>new ISO 8601 datetime to change the date of the dose to</p>
</dd><dt>taken</dt><dd><code>boolean</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Boolean representing whether the user took their medication (i.e., <code>true</code> if
they took it, <code>false</code> if this dose event represents them <em>skipping</em> their
medication)</p>
</dd><dt>scheduled</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Number representing the ID of the scheduled dose event. See <code>POST</code> endpoint documentation
for full details. Send <code>null</code> to remove an existing value.</p>
</dd><dt>notes</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>String to change the notes field of the dose to. If blank, will save the notes
field blank correspondingly.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    medication_id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    notes: <span class="hljs-string">"Not sleepy from this - forgot I took a melatonin pill earlier!"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_dose_id</code> (404) - a dose with that ID was not found</p>
</li>
<li>
<p><code>invalid_date</code> (400) - the date field specified is not in valid ISO 8601 format</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - no medication with the specified ID can be found</p>
</li>
<li>
<p><code>invalid_taken</code> (400) - <code>taken</code> is not a valid boolean</p>
</li>
<li>
<p><code>invalid_scheduled</code> (400)</p>
<p><code>scheduled</code> is not a valid integer corresponding to an event with that ID in the schedule
for the medication (with ID <code>medication_id</code>)</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    medication_id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    notes: <span class="hljs-string">"Not sleepy from this - forgot I took a melatonin pill earlier!"</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div><div id="dose-events-dose-event-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete an Event</div><a href="#dose-events-dose-event-delete" class="method delete">DELETE</a><code class="uri">/patients/{patientid}/doses/{doseid}</code></h4><p>Remove a single dose event (this will update generated statistics correspondingly, so be careful!)
The current user will need write access to both the patient and the medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient (<em>url</em>)</p>
</dd><dt>doseid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the dose (<em>url</em>)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have write access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_dose_id</code> (404) - a dose event with that ID was not found</p>
</li>
</ul>
</div><h5>Body</h5><pre><code>{
    id: <span class="hljs-number">1</span>,
    medication_id: <span class="hljs-number">1</span>,
    date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
    taken: <span class="hljs-literal">true</span>,
    scheduled: <span class="hljs-number">3</span>,
    notes: <span class="hljs-string">"Feeling sleepy now!"</span>
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="dose-events-first-dose-event" class="resource"><h3 class="resource-heading">First Dose Event<a href="#dose-events-first-dose-event" class="permalink">&para;</a></h3><h3 id="header-retrieve-first-date-medication-(dose)-was-taken-[get]">Retrieve first date medication (Dose) was taken [GET] <a class="permalink" href="#header-retrieve-first-date-medication-(dose)-was-taken-[get]" aria-hidden="true">¶</a></h3>
<p>Get date of first dose taken by a patient.</p>
</div></section><section id="schedule-1" class="resource-group"><h2 class="group-heading">Schedule<a href="#schedule-1" class="permalink">&para;</a></h2><div id="schedule-schedule" class="resource"><h3 class="resource-heading">Schedule<a href="#schedule-schedule" class="permalink">&para;</a></h3><div id="schedule-schedule-get" class="action get"><h4 class="action-heading"><div class="name">View Schedule</div><a href="#schedule-schedule-get" class="method get">GET</a><code class="uri">/patients/{patientid}/schedule</code></h4><p>Given that all medication data (including schedules in the <a href="#medications">required format</a>)
have been entered, this endpoint generates an easy-to-use schedule for when the patient
should take their medication over a specific date range.</p>
<p>If events are in the past, the schedule will contain a <code>took_medication</code> boolean indicating
whether the patient took the medication when they were required. If they did, then a
<code>delay</code> integer field will be present indicating the number of minutes late the patient was
when taking the medication. <code>delay</code> is signed: if the patient took the medication too early,
it will be negative.</p>
<p>Each event item can be one of two times: <code>time</code> and <code>date</code>. <code>time</code> items represent a specific
datetime at which the medication should be taken (and are formatted as an ISO-8601 datetime
in the patient’s <em>local</em> timezone). <code>date</code> items indicate that the medication can be taken at
any time on the specified day, and have the date formatted as <code>YYYY-MM-DD</code> in the patient’s
<em>local</em> timezone.</p>
<p>Each event will also contain a <code>happened</code> boolean key indicating whether it took place in the
past (<code>true</code>) or will take place in the future (<code>false</code>).</p>
<p>Crucially, each event contains a <code>notification</code> key containing an ISO-8601 datetime in the
patient’s local timezone representing the time at which the patient should be notified they need
to take their medication. This uses the <strong>user-specific</strong> notification settings set in
the <code>/patients/:patientid/medications/:medicationid/times/:timeid</code> endpoints (and defaults to
30 minutes prior).</p>
<p>The schedule also contains “as needed” events, where a dose was recorded manually by the user not
corresponding to any scheduled event. To distinguish between these and scheduled events, a <code>scheduled</code>
key is included: it is not present for “as needed” events, and is present and equal to the ID of the
scheduled time event for scheduled events.</p>
<p>Additionally, each event will contain the <code>take_with_food</code> (boolean or null), <code>take_with_medications</code>
(array of integers) and <code>take_without_medications</code> (array of integers) keys, each representing
the same data and formatted the same way as in the medication <code>schedule</code> field.</p>
<p>The schedule will also contain an overall <code>statistics</code> object, containing floats <code>took_medication</code>
(a mean average value for <code>took_medication</code> as a percentage out of 100), <code>delta</code> (a mean average
value of all of the <code>delay</code>s) and <code>delay</code> (a mean average value of the <strong>absolute values</strong> of all
the <code>delay</code>s). Each number in <code>statistics</code> will be <code>null</code> if there are no schedule events in
the past found (for example, if start date is in the future). As needed events are ignored when
calculating statistics.</p>
<p>The user will need read access to the patient to get a successful response from this endpoint.
Further, only schedule events corresponding to medications for which the user has read access
will be shown.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>patientid</dt><dd><code>integer</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>unique ID of the patient</p>
</dd><dt>start_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>Start schedule at this date. Must be a valid ISO 8601 YYYY-MM-DD date. Defaults
to the current time.</p>
</dd><dt>end_date</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>End schedule at this date. Must be a valid ISO 8601 YYYY-MM-DD date. Defaults to exactly
one week later than the current time.</p>
</dd><dt>medication_id</dt><dd><code>integer</code>&nbsp;<span>(optional)</span>&nbsp;<p>Restricts the schedule to events for one medication only.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Authorization</span>: <span class="hljs-string">Bearer ACCESS_TOKEN</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Errors</p>
<ul>
<li>
<p><code>access_token_required</code> (401) - no access token specified in
<code>Authorization</code> header</p>
</li>
<li>
<p><code>invalid_access_token</code> (401) - the access token specified is invalid</p>
</li>
<li>
<p><code>unauthorized</code> (403) - the current user does not have read access to this patient</p>
</li>
<li>
<p><code>invalid_patient_id</code> (404) - a patient with the specified ID was not found</p>
</li>
<li>
<p><code>invalid_medication_id</code> (400) - a medication with that ID was not found</p>
</li>
<li>
<p><code>invalid_start</code> (400) - a start date not formatted correctly as YYYY-MM-DD</p>
</li>
<li>
<p><code>invalid_end</code> (400) - an end date not formatted correctly as YYYY-MM-DD</p>
</li>
</ul>
</div><h5>Body</h5><pre><code><span class="hljs-comment">// This illustrates a response when the current date falls somewhere</span>
<span class="hljs-comment">// in the middle of the specified date range. In other cases, either</span>
<span class="hljs-comment">// the first or second type of schedule datums would of course not be present.</span>
{
    schedule: [
        {
            type: <span class="hljs-string">"time"</span>,
            date: <span class="hljs-string">"2015-03-31T19:27:09+00:00"</span>,
            notification: <span class="hljs-string">"2015-03-31T18:57:09+00:00"</span>,
            medication_id: <span class="hljs-number">1</span>,
            took_medication: <span class="hljs-literal">true</span>,
            delay: -<span class="hljs-number">17</span>,
            dose_id: <span class="hljs-number">14</span>,
            take_with_food: <span class="hljs-literal">true</span>,
            take_with_medications: [<span class="hljs-number">1</span>],
            take_without_medications: [<span class="hljs-number">3</span>]
        },
        {
            type: <span class="hljs-string">"time"</span>,
            date: <span class="hljs-string">"2015-03-31T19:27:09+00:00"</span>,
            notification: <span class="hljs-string">"2015-03-31T18:57:09+00:00"</span>,
            medication_id: <span class="hljs-number">1</span>,
            took_medication: <span class="hljs-literal">false</span>,
            take_with_food: <span class="hljs-literal">null</span>,
            take_with_medications: [],
            take_without_medications: []
        },
        {
            type: <span class="hljs-string">"time"</span>,
            date: <span class="hljs-string">"2015-03-31T19:27:09+00:00"</span>,
            notification: <span class="hljs-string">"2015-03-31T18:57:09+00:00"</span>,
            medication_id: <span class="hljs-number">1</span>,
            took_medication: <span class="hljs-literal">false</span>,
            take_with_food: <span class="hljs-literal">null</span>,
            take_with_medications: [],
            take_without_medications: []
        },
        ... <span class="hljs-comment">// more events that have already taken place</span>
        {
            type: <span class="hljs-string">"time"</span>,
            date: <span class="hljs-string">"2015-05-31T19:27:09+00:00"</span>,
            notification: <span class="hljs-string">"2015-03-31T18:57:09+00:00"</span>,
            medication_id: <span class="hljs-number">1</span>,
            take_with_food: <span class="hljs-literal">null</span>,
            take_with_medications: [],
            take_without_medications: []
        },
        {
            <span class="hljs-comment">// no time specified, just the date</span>
            type: <span class="hljs-string">"date"</span>,
            date: <span class="hljs-string">"2015-05-31"</span>,
            notification: <span class="hljs-string">"2015-03-31T18:57:09+00:00"</span>,
            medication_id: <span class="hljs-number">3</span>,
            take_with_food: <span class="hljs-literal">null</span>,
            take_with_medications: [],
            take_without_medications: []
        },
        ... <span class="hljs-comment">// more events in the future</span>
    ],
    <span class="hljs-comment">// only present if some events have already taken place</span>
    statistics: {
        took_medication: <span class="hljs-number">70.3</span>,
        delay: <span class="hljs-number">4</span>,
        delta: -<span class="hljs-number">1</span>
    },
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="npi" class="resource-group"><h2 class="group-heading">NPI<a href="#npi" class="permalink">&para;</a></h2><p>Uses the BloomAPI to look up provider information in the National Plan and Provider Enumeration System (NPPES).</p>
<div id="npi-provider-collection" class="resource"><h3 class="resource-heading">Provider Collection<a href="#npi-provider-collection" class="permalink">&para;</a></h3><div id="npi-provider-collection-post" class="action post"><h4 class="action-heading"><div class="name">Query Providers</div><a href="#npi-provider-collection-post" class="method post">POST</a><code class="uri">/npi</code></h4><p>Searches BloomAPI using a combination of first name, last name and State (two letter code). Receives an
array of possible Prescriber matches. BloomAPI limits the response to 100 possible matches.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>search</dt><dd><code>object</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Query object to search by. See example below, as well as <a href="https://github.com/amida-tech/npi-js">here</a>
and <a href="https://www.bloomapi.com/documentation/public-data/">here</a> for documentation.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    name: [{
        first: <span class="hljs-string">"Harry"</span>, <span class="hljs-comment">//String, Optional</span>
        last: <span class="hljs-string">"Dennis"</span> <span class="hljs-comment">//String, required</span>
    }],
    address: [{
        state: <span class="hljs-string">"CA"</span> <span class="hljs-comment">//String, optional</span>
    }]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li><code>rxnorm_error</code> (500) - error communicating with Bloom API</li>
</ul>
</div><h5>Body</h5><pre><code>{
    providers: [ 
        {
            business_address: {
                address_details_line: <span class="hljs-string">"2ND FLOOR"</span>,
                address_line: <span class="hljs-string">"2350 W EL CAMINO REAL"</span>,
                city: <span class="hljs-string">"MOUNTAIN VIEW"</span>,
                country_code: <span class="hljs-string">"US"</span>,
                state: <span class="hljs-string">"CA"</span>,
                zip: <span class="hljs-string">"940406203"</span>
            },
            credential: <span class="hljs-string">"MD"</span>,
            enumeration_date: <span class="hljs-string">"2006-08-31T00:00:00.000Z"</span>,
            first_name: <span class="hljs-string">"HARRY"</span>,
            gender: <span class="hljs-string">"male"</span>,
            last_name: <span class="hljs-string">"DENNIS"</span>,
            last_update_date: <span class="hljs-string">"2012-01-10T00:00:00.000Z"</span>,
            npi: <span class="hljs-number">1073624029</span>,
            practice_address: {
                address_line: <span class="hljs-string">"795 EL CAMINO REAL"</span>,
                city: <span class="hljs-string">"PALO ALTO"</span>,
                country_code: <span class="hljs-string">"US"</span>,
                phone: <span class="hljs-string">"6508532992"</span>,
                state: <span class="hljs-string">"CA"</span>,
                zip: <span class="hljs-string">"943012302"</span>
            },
            provider_details: [{
                healthcare_taxonomy_code: <span class="hljs-string">"208000000X"</span>,
                license_number: <span class="hljs-string">"G68571"</span>,
                license_number_state: <span class="hljs-string">"CA"</span>,
                taxonomy_switch: <span class="hljs-string">"yes"</span>
            }],
            sole_proprietor: <span class="hljs-string">"no"</span>,
            type: <span class="hljs-string">"individual"</span>
        },
        ...
    ],
    count: <span class="hljs-number">3</span>,
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="rxnorm" class="resource-group"><h2 class="group-heading">RXNorm<a href="#rxnorm" class="permalink">&para;</a></h2><p>Uses the RXNorm and OpenFDA APIs to look up medication details. An example flow would be to search
by name using the <code>/group</code> endpoint. If no results are found, then search for spelling suggestions
using the <code>/spelling</code> endpoint, and use the results to search by the correct name using the <code>/group</code>
endpoint.</p>
<div id="rxnorm-medications-by-name" class="resource"><h3 class="resource-heading">Medications by Name<a href="#rxnorm-medications-by-name" class="permalink">&para;</a></h3><div id="rxnorm-medications-by-name-post" class="action post"><h4 class="action-heading"><div class="name">Query</div><a href="#rxnorm-medications-by-name-post" class="method post">POST</a><code class="uri">/rxnorm/group</code></h4><p>Searches rxnorm for drug by name. Receives a response object with the name searched for and arrays
of information. Possible matches for drugs (if any) are located in the
<code>response.drugGroup.conceptGroup</code> array, with the bulk of the information in
<code>response.drugGroup.conceptGroup[].conceptProperties</code>.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>medname</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Medication name to search by.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    medname: <span class="hljs-string">"Allegra-D"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li><code>rxnorm_error</code> (500) - error communicating with Bloom API</li>
</ul>
</div><h5>Body</h5><pre><code>{
    result: {
        drugGroup: {
            name: <span class="hljs-string">"Allegra-D"</span>,
            conceptGroup: [
                {
                    tty: <span class="hljs-string">"BPCK"</span>
                },
                {
                    tty: <span class="hljs-string">"SBD"</span>,
                    conceptProperties: [
                        {
                            rxcui: <span class="hljs-string">"997512"</span>,
                            name: <span class="hljs-string">"12 HR Fexofenadine hydrochloride 60 MG / Pseudoephedrine Hydrochloride 120 MG Extended Release Oral Tablet [Allegra-D]"</span>,
                            synonym: <span class="hljs-string">"Allegra-D 12 Hour (fexofenadine hydrochloride 60 MG / pseudoephedrine hydrochloride 120 MG) Extended Release Oral Tablet"</span>,
                            tty: <span class="hljs-string">"SBD"</span>,
                            language: <span class="hljs-string">"ENG"</span>,
                            suppress: <span class="hljs-string">"N"</span>,
                            umlscui: <span class="hljs-string">"C0716180"</span>,
                            dfg: [<span class="hljs-string">"Oral Tablet"</span>],
                            brand: <span class="hljs-string">"Allegra-D"</span>,
                            modifiedname: <span class="hljs-string">"12 HR Fexofenadine hydrochloride 60 MG / Pseudoephedrine Hydrochloride 120 MG Extended Release  "</span>
                        }, {
                            rxcui: <span class="hljs-string">"997515"</span>,
                            name: <span class="hljs-string">"24 HR Fexofenadine hydrochloride 180 MG / Pseudoephedrine Hydrochloride 240 MG Extended Release Oral Tablet [Allegra-D]"</span>,
                            synonym: <span class="hljs-string">"Allegra-D 24 Hour (fexofenadine hydrochloride 180 MG / pseudoephedrine hydrochloride 240 MG) Extended Release Oral Tablet"</span>,
                            tty: <span class="hljs-string">"SBD"</span>,
                            language: <span class="hljs-string">"ENG"</span>,
                            suppress: <span class="hljs-string">"N"</span>,
                            umlscui: <span class="hljs-string">"C1616745"</span>,
                            dfg: [<span class="hljs-string">"Oral Tablet"</span>],
                            brand: <span class="hljs-string">"Allegra-D"</span>,
                            modifiedname: <span class="hljs-string">"24 HR Fexofenadine hydrochloride 180 MG / Pseudoephedrine Hydrochloride 240 MG Extended Release  "</span>
                        }
                    ]
                }
            ]
        },
        compiled: [
            {
                rxcui: <span class="hljs-string">"997512"</span>,
                name: <span class="hljs-string">"12 HR Fexofenadine hydrochloride 60 MG / Pseudoephedrine Hydrochloride 120 MG Extended Release Oral Tablet [Allegra-D]"</span>,
                synonym: <span class="hljs-string">"Allegra-D 12 Hour (fexofenadine hydrochloride 60 MG / pseudoephedrine hydrochloride 120 MG) Extended Release Oral Tablet"</span>,
                tty: <span class="hljs-string">"SBD"</span>,
                language: <span class="hljs-string">"ENG"</span>,
                suppress: <span class="hljs-string">"N"</span>,
                umlscui: <span class="hljs-string">"C0716180"</span>,
                dfg: [<span class="hljs-string">"Oral Tablet"</span>],
                brand: <span class="hljs-string">"Allegra-D"</span>,
                modifiedname: <span class="hljs-string">"12 HR Fexofenadine hydrochloride 60 MG / Pseudoephedrine Hydrochloride 120 MG Extended Release  "</span>
            },
            {
                rxcui: <span class="hljs-string">"997515"</span>,
                name: <span class="hljs-string">"24 HR Fexofenadine hydrochloride 180 MG / Pseudoephedrine Hydrochloride 240 MG Extended Release Oral Tablet [Allegra-D]"</span>,
                synonym: <span class="hljs-string">"Allegra-D 24 Hour (fexofenadine hydrochloride 180 MG / pseudoephedrine hydrochloride 240 MG) Extended Release Oral Tablet"</span>,
                tty: <span class="hljs-string">"SBD"</span>,
                language: <span class="hljs-string">"ENG"</span>,
                suppress: <span class="hljs-string">"N"</span>,
                umlscui: <span class="hljs-string">"C1616745"</span>,
                dfg: [<span class="hljs-string">"Oral Tablet"</span>],
                brand: <span class="hljs-string">"Allegra-D"</span>,
                modifiedname: <span class="hljs-string">"24 HR Fexofenadine hydrochloride 180 MG / Pseudoephedrine Hydrochloride 240 MG Extended Release  "</span>
            }
        ],
        dfg: [<span class="hljs-string">"Oral Tablet"</span>],
        brand: [<span class="hljs-string">"Allegra-D"</span>]
    },
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="rxnorm-medications-by-spelling" class="resource"><h3 class="resource-heading">Medications by Spelling<a href="#rxnorm-medications-by-spelling" class="permalink">&para;</a></h3><div id="rxnorm-medications-by-spelling-post" class="action post"><h4 class="action-heading"><div class="name">Query</div><a href="#rxnorm-medications-by-spelling-post" class="method post">POST</a><code class="uri">/rxnorm/spelling</code></h4><p>Searches RXNorm for spelling suggestions for a given medication.</p>
<div class="title"><strong>Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>medname</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Medication name to search by.</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    medname: <span class="hljs-string">"allegrad"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li><code>rxnorm_error</code> (500) - error communicating with Bloom API</li>
</ul>
</div><h5>Body</h5><pre><code>{
    result: {
        suggestionGroup: {
            name: <span class="hljs-string">"allegrad"</span>,
            suggestionList: {
                suggestion: [<span class="hljs-string">"Allegra-D"</span>, <span class="hljs-string">"Allegra"</span>, <span class="hljs-string">"Allermax"</span>, <span class="hljs-string">"Alera"</span>, <span class="hljs-string">"Alkeran"</span>, <span class="hljs-string">"Aloeguard"</span>]
            }
        }
    },
    success: <span class="hljs-literal">true</span>
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section></div></div></div><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 17 Sep 2015</p><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
};
</script></body></html>